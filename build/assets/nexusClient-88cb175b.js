var Kl=Object.defineProperty;var Yl=(h,l,o)=>l in h?Kl(h,l,{enumerable:!0,configurable:!0,writable:!0,value:o}):h[l]=o;var rt=(h,l,o)=>(Yl(h,typeof l!="symbol"?l+"":l,o),o);import{c as pt,$ as Ln,g as ql}from"./pageCommonInit-9ea57622.js";import{C as Xs,a as Pn}from"./modalGeneral-91a492db.js";var Gl={exports:{}};/*!
  * Bootstrap v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(h,l){(function(o,f){h.exports=f()})(pt,function(){const o=new Map,f={set(i,t,n){o.has(i)||o.set(i,new Map);const a=o.get(i);if(!a.has(t)&&a.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(a.keys())[0]}.`);return}a.set(t,n)},get(i,t){return o.has(i)&&o.get(i).get(t)||null},remove(i,t){if(!o.has(i))return;const n=o.get(i);n.delete(t),n.size===0&&o.delete(i)}},p=1e6,m=1e3,b="transitionend",$=i=>(i&&window.CSS&&window.CSS.escape&&(i=i.replace(/#([^\s"#']+)/g,(t,n)=>`#${CSS.escape(n)}`)),i),O=i=>i==null?`${i}`:Object.prototype.toString.call(i).match(/\s([a-z]+)/i)[1].toLowerCase(),C=i=>{do i+=Math.floor(Math.random()*p);while(document.getElementById(i));return i},w=i=>{if(!i)return 0;let{transitionDuration:t,transitionDelay:n}=window.getComputedStyle(i);const a=Number.parseFloat(t),u=Number.parseFloat(n);return!a&&!u?0:(t=t.split(",")[0],n=n.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(n))*m)},I=i=>{i.dispatchEvent(new Event(b))},k=i=>!i||typeof i!="object"?!1:(typeof i.jquery<"u"&&(i=i[0]),typeof i.nodeType<"u"),Q=i=>k(i)?i.jquery?i[0]:i:typeof i=="string"&&i.length>0?document.querySelector($(i)):null,et=i=>{if(!k(i)||i.getClientRects().length===0)return!1;const t=getComputedStyle(i).getPropertyValue("visibility")==="visible",n=i.closest("details:not([open])");if(!n)return t;if(n!==i){const a=i.closest("summary");if(a&&a.parentNode!==n||a===null)return!1}return t},X=i=>!i||i.nodeType!==Node.ELEMENT_NODE||i.classList.contains("disabled")?!0:typeof i.disabled<"u"?i.disabled:i.hasAttribute("disabled")&&i.getAttribute("disabled")!=="false",ce=i=>{if(!document.documentElement.attachShadow)return null;if(typeof i.getRootNode=="function"){const t=i.getRootNode();return t instanceof ShadowRoot?t:null}return i instanceof ShadowRoot?i:i.parentNode?ce(i.parentNode):null},ut=()=>{},St=i=>{i.offsetHeight},Ot=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Ft=[],on=i=>{document.readyState==="loading"?(Ft.length||document.addEventListener("DOMContentLoaded",()=>{for(const t of Ft)t()}),Ft.push(i)):i()},Dt=()=>document.documentElement.dir==="rtl",vt=i=>{on(()=>{const t=Ot();if(t){const n=i.NAME,a=t.fn[n];t.fn[n]=i.jQueryInterface,t.fn[n].Constructor=i,t.fn[n].noConflict=()=>(t.fn[n]=a,i.jQueryInterface)}})},Et=(i,t=[],n=i)=>typeof i=="function"?i(...t):n,wt=(i,t,n=!0)=>{if(!n){Et(i);return}const a=5,u=w(t)+a;let _=!1;const g=({target:v})=>{v===t&&(_=!0,t.removeEventListener(b,g),Et(i))};t.addEventListener(b,g),setTimeout(()=>{_||I(t)},u)},an=(i,t,n,a)=>{const u=i.length;let _=i.indexOf(t);return _===-1?!n&&a?i[u-1]:i[0]:(_+=n?1:-1,a&&(_=(_+u)%u),i[Math.max(0,Math.min(_,u-1))])},gi=/[^.]*(?=\..*)\.|.*/,mi=/\..*/,vi=/::\d+$/,cn={};let ln=1;const fn={mouseenter:"mouseover",mouseleave:"mouseout"},yt=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function un(i,t){return t&&`${t}::${ln++}`||i.uidEvent||ln++}function Me(i){const t=un(i);return i.uidEvent=t,cn[t]=cn[t]||{},cn[t]}function ge(i,t){return function n(a){return ke(a,{delegateTarget:i}),n.oneOff&&y.off(i,a.type,t),t.apply(i,[a])}}function ie(i,t,n){return function a(u){const _=i.querySelectorAll(t);for(let{target:g}=u;g&&g!==this;g=g.parentNode)for(const v of _)if(v===g)return ke(u,{delegateTarget:g}),a.oneOff&&y.off(i,u.type,t,n),n.apply(g,[u])}}function hn(i,t,n=null){return Object.values(i).find(a=>a.callable===t&&a.delegationSelector===n)}function dn(i,t,n){const a=typeof t=="string",u=a?n:t||n;let _=Hn(i);return yt.has(_)||(_=i),[a,u,_]}function kn(i,t,n,a,u){if(typeof t!="string"||!i)return;let[_,g,v]=dn(t,n,a);t in fn&&(g=(ot=>function(q){if(!q.relatedTarget||q.relatedTarget!==q.delegateTarget&&!q.delegateTarget.contains(q.relatedTarget))return ot.call(this,q)})(g));const A=Me(i),N=A[v]||(A[v]={}),T=hn(N,g,_?n:null);if(T){T.oneOff=T.oneOff&&u;return}const W=un(g,t.replace(gi,"")),Y=_?ie(i,n,g):ge(i,g);Y.delegationSelector=_?n:null,Y.callable=g,Y.oneOff=u,Y.uidEvent=W,N[W]=Y,i.addEventListener(v,Y,_)}function pn(i,t,n,a,u){const _=hn(t[n],a,u);_&&(i.removeEventListener(n,_,!!u),delete t[n][_.uidEvent])}function me(i,t,n,a){const u=t[n]||{};for(const[_,g]of Object.entries(u))_.includes(a)&&pn(i,t,n,g.callable,g.delegationSelector)}function Hn(i){return i=i.replace(mi,""),fn[i]||i}const y={on(i,t,n,a){kn(i,t,n,a,!1)},one(i,t,n,a){kn(i,t,n,a,!0)},off(i,t,n,a){if(typeof t!="string"||!i)return;const[u,_,g]=dn(t,n,a),v=g!==t,A=Me(i),N=A[g]||{},T=t.startsWith(".");if(typeof _<"u"){if(!Object.keys(N).length)return;pn(i,A,g,_,u?n:null);return}if(T)for(const W of Object.keys(A))me(i,A,W,t.slice(1));for(const[W,Y]of Object.entries(N)){const j=W.replace(vi,"");(!v||t.includes(j))&&pn(i,A,g,Y.callable,Y.delegationSelector)}},trigger(i,t,n){if(typeof t!="string"||!i)return null;const a=Ot(),u=Hn(t),_=t!==u;let g=null,v=!0,A=!0,N=!1;_&&a&&(g=a.Event(t,n),a(i).trigger(g),v=!g.isPropagationStopped(),A=!g.isImmediatePropagationStopped(),N=g.isDefaultPrevented());const T=ke(new Event(t,{bubbles:v,cancelable:!0}),n);return N&&T.preventDefault(),A&&i.dispatchEvent(T),T.defaultPrevented&&g&&g.preventDefault(),T}};function ke(i,t={}){for(const[n,a]of Object.entries(t))try{i[n]=a}catch{Object.defineProperty(i,n,{configurable:!0,get(){return a}})}return i}function He(i){if(i==="true")return!0;if(i==="false")return!1;if(i===Number(i).toString())return Number(i);if(i===""||i==="null")return null;if(typeof i!="string")return i;try{return JSON.parse(decodeURIComponent(i))}catch{return i}}function _n(i){return i.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}const Rt={setDataAttribute(i,t,n){i.setAttribute(`data-bs-${_n(t)}`,n)},removeDataAttribute(i,t){i.removeAttribute(`data-bs-${_n(t)}`)},getDataAttributes(i){if(!i)return{};const t={},n=Object.keys(i.dataset).filter(a=>a.startsWith("bs")&&!a.startsWith("bsConfig"));for(const a of n){let u=a.replace(/^bs/,"");u=u.charAt(0).toLowerCase()+u.slice(1,u.length),t[u]=He(i.dataset[a])}return t},getDataAttribute(i,t){return He(i.getAttribute(`data-bs-${_n(t)}`))}};class ht{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,n){const a=k(n)?Rt.getDataAttribute(n,"config"):{};return{...this.constructor.Default,...typeof a=="object"?a:{},...k(n)?Rt.getDataAttributes(n):{},...typeof t=="object"?t:{}}}_typeCheckConfig(t,n=this.constructor.DefaultType){for(const[a,u]of Object.entries(n)){const _=t[a],g=k(_)?"element":O(_);if(!new RegExp(u).test(g))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${a}" provided type "${g}" but expected type "${u}".`)}}}const gn="5.3.2";class Lt extends ht{constructor(t,n){super(),t=Q(t),t&&(this._element=t,this._config=this._getConfig(n),f.set(this._element,this.constructor.DATA_KEY,this))}dispose(){f.remove(this._element,this.constructor.DATA_KEY),y.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,n,a=!0){wt(t,n,a)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return f.get(Q(t),this.DATA_KEY)}static getOrCreateInstance(t,n={}){return this.getInstance(t)||new this(t,typeof n=="object"?n:null)}static get VERSION(){return gn}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const je=i=>{let t=i.getAttribute("data-bs-target");if(!t||t==="#"){let n=i.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),t=n&&n!=="#"?$(n.trim()):null}return t},D={find(i,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,i))},findOne(i,t=document.documentElement){return Element.prototype.querySelector.call(t,i)},children(i,t){return[].concat(...i.children).filter(n=>n.matches(t))},parents(i,t){const n=[];let a=i.parentNode.closest(t);for(;a;)n.push(a),a=a.parentNode.closest(t);return n},prev(i,t){let n=i.previousElementSibling;for(;n;){if(n.matches(t))return[n];n=n.previousElementSibling}return[]},next(i,t){let n=i.nextElementSibling;for(;n;){if(n.matches(t))return[n];n=n.nextElementSibling}return[]},focusableChildren(i){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(n=>`${n}:not([tabindex^="-"])`).join(",");return this.find(t,i).filter(n=>!X(n)&&et(n))},getSelectorFromElement(i){const t=je(i);return t&&D.findOne(t)?t:null},getElementFromSelector(i){const t=je(i);return t?D.findOne(t):null},getMultipleElementsFromSelector(i){const t=je(i);return t?D.find(t):[]}},ve=(i,t="hide")=>{const n=`click.dismiss${i.EVENT_KEY}`,a=i.NAME;y.on(document,n,`[data-bs-dismiss="${a}"]`,function(u){if(["A","AREA"].includes(this.tagName)&&u.preventDefault(),X(this))return;const _=D.getElementFromSelector(this)||this.closest(`.${a}`);i.getOrCreateInstance(_)[t]()})},Ve="alert",re=".bs.alert",Ei=`close${re}`,yi=`closed${re}`,jn="fade",Vn="show";class zt extends Lt{static get NAME(){return Ve}close(){if(y.trigger(this._element,Ei).defaultPrevented)return;this._element.classList.remove(Vn);const n=this._element.classList.contains(jn);this._queueCallback(()=>this._destroyElement(),this._element,n)}_destroyElement(){this._element.remove(),y.trigger(this._element,yi),this.dispose()}static jQueryInterface(t){return this.each(function(){const n=zt.getOrCreateInstance(this);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t](this)}})}}ve(zt,"close"),vt(zt);const Ai="button",mn=".bs.button",vn=".data-api",bi="active",En='[data-bs-toggle="button"]',Ti=`click${mn}${vn}`;class Pt extends Lt{static get NAME(){return Ai}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(bi))}static jQueryInterface(t){return this.each(function(){const n=Pt.getOrCreateInstance(this);t==="toggle"&&n[t]()})}}y.on(document,Ti,En,i=>{i.preventDefault();const t=i.target.closest(En);Pt.getOrCreateInstance(t).toggle()}),vt(Pt);const Oi="swipe",fe=".bs.swipe",Fn=`touchstart${fe}`,Un=`touchmove${fe}`,yn=`touchend${fe}`,An=`pointerdown${fe}`,wi=`pointerup${fe}`,$i="touch",bn="pen",Ci="pointer-event",Bn=40,Si={endCallback:null,leftCallback:null,rightCallback:null},xi={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class At extends ht{constructor(t,n){super(),this._element=t,!(!t||!At.isSupported())&&(this._config=this._getConfig(n),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Si}static get DefaultType(){return xi}static get NAME(){return Oi}dispose(){y.off(this._element,fe)}_start(t){if(!this._supportPointerEvents){this._deltaX=t.touches[0].clientX;return}this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX)}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),Et(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=Bn)return;const n=t/this._deltaX;this._deltaX=0,n&&Et(n>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(y.on(this._element,An,t=>this._start(t)),y.on(this._element,wi,t=>this._end(t)),this._element.classList.add(Ci)):(y.on(this._element,Fn,t=>this._start(t)),y.on(this._element,Un,t=>this._move(t)),y.on(this._element,yn,t=>this._end(t)))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType===bn||t.pointerType===$i)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Ni="carousel",Ut=".bs.carousel",Fe=".data-api",Ii="ArrowLeft",r="ArrowRight",e=500,s="next",c="prev",d="left",E="right",S=`slide${Ut}`,L=`slid${Ut}`,z=`keydown${Ut}`,V=`mouseenter${Ut}`,R=`mouseleave${Ut}`,K=`dragstart${Ut}`,P=`load${Ut}${Fe}`,F=`click${Ut}${Fe}`,M="carousel",H="active",x="slide",U="carousel-item-end",Z="carousel-item-start",st="carousel-item-next",G="carousel-item-prev",B=".active",Kt=".carousel-item",Tn=B+Kt,bt=".carousel-item img",dt=".carousel-indicators",_t="[data-bs-slide], [data-bs-slide-to]",Ee='[data-bs-ride="carousel"]',Yt={[Ii]:E,[r]:d},On={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Zt={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class qt extends Lt{constructor(t,n){super(t,n),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=D.findOne(dt,this._element),this._addEventListeners(),this._config.ride===M&&this.cycle()}static get Default(){return On}static get DefaultType(){return Zt}static get NAME(){return Ni}next(){this._slide(s)}nextWhenVisible(){!document.hidden&&et(this._element)&&this.next()}prev(){this._slide(c)}pause(){this._isSliding&&I(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){y.one(this._element,L,()=>this.cycle());return}this.cycle()}}to(t){const n=this._getItems();if(t>n.length-1||t<0)return;if(this._isSliding){y.one(this._element,L,()=>this.to(t));return}const a=this._getItemIndex(this._getActive());if(a===t)return;const u=t>a?s:c;this._slide(u,n[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&y.on(this._element,z,t=>this._keydown(t)),this._config.pause==="hover"&&(y.on(this._element,V,()=>this.pause()),y.on(this._element,R,()=>this._maybeEnableCycle())),this._config.touch&&At.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const a of D.find(bt,this._element))y.on(a,K,u=>u.preventDefault());const n={leftCallback:()=>this._slide(this._directionToOrder(d)),rightCallback:()=>this._slide(this._directionToOrder(E)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),e+this._config.interval))}};this._swipeHelper=new At(this._element,n)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const n=Yt[t.key];n&&(t.preventDefault(),this._slide(this._directionToOrder(n)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const n=D.findOne(B,this._indicatorsElement);n.classList.remove(H),n.removeAttribute("aria-current");const a=D.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);a&&(a.classList.add(H),a.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const n=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=n||this._config.defaultInterval}_slide(t,n=null){if(this._isSliding)return;const a=this._getActive(),u=t===s,_=n||an(this._getItems(),a,u,this._config.wrap);if(_===a)return;const g=this._getItemIndex(_),v=j=>y.trigger(this._element,j,{relatedTarget:_,direction:this._orderToDirection(t),from:this._getItemIndex(a),to:g});if(v(S).defaultPrevented||!a||!_)return;const N=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(g),this._activeElement=_;const T=u?Z:U,W=u?st:G;_.classList.add(W),St(_),a.classList.add(T),_.classList.add(T);const Y=()=>{_.classList.remove(T,W),_.classList.add(H),a.classList.remove(H,W,T),this._isSliding=!1,v(L)};this._queueCallback(Y,a,this._isAnimated()),N&&this.cycle()}_isAnimated(){return this._element.classList.contains(x)}_getActive(){return D.findOne(Tn,this._element)}_getItems(){return D.find(Kt,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return Dt()?t===d?c:s:t===d?s:c}_orderToDirection(t){return Dt()?t===c?d:E:t===c?E:d}static jQueryInterface(t){return this.each(function(){const n=qt.getOrCreateInstance(this,t);if(typeof t=="number"){n.to(t);return}if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t]()}})}}y.on(document,F,_t,function(i){const t=D.getElementFromSelector(this);if(!t||!t.classList.contains(M))return;i.preventDefault();const n=qt.getOrCreateInstance(t),a=this.getAttribute("data-bs-slide-to");if(a){n.to(a),n._maybeEnableCycle();return}if(Rt.getDataAttribute(this,"slide")==="next"){n.next(),n._maybeEnableCycle();return}n.prev(),n._maybeEnableCycle()}),y.on(window,P,()=>{const i=D.find(Ee);for(const t of i)qt.getOrCreateInstance(t)}),vt(qt);const ro="collapse",wn=".bs.collapse",so=".data-api",oo=`show${wn}`,ao=`shown${wn}`,co=`hide${wn}`,lo=`hidden${wn}`,fo=`click${wn}${so}`,Di="show",Ue="collapse",Wn="collapsing",uo="collapsed",ho=`:scope .${Ue} .${Ue}`,po="collapse-horizontal",_o="width",go="height",mo=".collapse.show, .collapse.collapsing",Ri='[data-bs-toggle="collapse"]',vo={parent:null,toggle:!0},Eo={parent:"(null|element)",toggle:"boolean"};class Be extends Lt{constructor(t,n){super(t,n),this._isTransitioning=!1,this._triggerArray=[];const a=D.find(Ri);for(const u of a){const _=D.getSelectorFromElement(u),g=D.find(_).filter(v=>v===this._element);_!==null&&g.length&&this._triggerArray.push(u)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return vo}static get DefaultType(){return Eo}static get NAME(){return ro}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(mo).filter(v=>v!==this._element).map(v=>Be.getOrCreateInstance(v,{toggle:!1}))),t.length&&t[0]._isTransitioning||y.trigger(this._element,oo).defaultPrevented)return;for(const v of t)v.hide();const a=this._getDimension();this._element.classList.remove(Ue),this._element.classList.add(Wn),this._element.style[a]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const u=()=>{this._isTransitioning=!1,this._element.classList.remove(Wn),this._element.classList.add(Ue,Di),this._element.style[a]="",y.trigger(this._element,ao)},g=`scroll${a[0].toUpperCase()+a.slice(1)}`;this._queueCallback(u,this._element,!0),this._element.style[a]=`${this._element[g]}px`}hide(){if(this._isTransitioning||!this._isShown()||y.trigger(this._element,co).defaultPrevented)return;const n=this._getDimension();this._element.style[n]=`${this._element.getBoundingClientRect()[n]}px`,St(this._element),this._element.classList.add(Wn),this._element.classList.remove(Ue,Di);for(const u of this._triggerArray){const _=D.getElementFromSelector(u);_&&!this._isShown(_)&&this._addAriaAndCollapsedClass([u],!1)}this._isTransitioning=!0;const a=()=>{this._isTransitioning=!1,this._element.classList.remove(Wn),this._element.classList.add(Ue),y.trigger(this._element,lo)};this._element.style[n]="",this._queueCallback(a,this._element,!0)}_isShown(t=this._element){return t.classList.contains(Di)}_configAfterMerge(t){return t.toggle=!!t.toggle,t.parent=Q(t.parent),t}_getDimension(){return this._element.classList.contains(po)?_o:go}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(Ri);for(const n of t){const a=D.getElementFromSelector(n);a&&this._addAriaAndCollapsedClass([n],this._isShown(a))}}_getFirstLevelChildren(t){const n=D.find(ho,this._config.parent);return D.find(t,this._config.parent).filter(a=>!n.includes(a))}_addAriaAndCollapsedClass(t,n){if(t.length)for(const a of t)a.classList.toggle(uo,!n),a.setAttribute("aria-expanded",n)}static jQueryInterface(t){const n={};return typeof t=="string"&&/show|hide/.test(t)&&(n.toggle=!1),this.each(function(){const a=Be.getOrCreateInstance(this,n);if(typeof t=="string"){if(typeof a[t]>"u")throw new TypeError(`No method named "${t}"`);a[t]()}})}}y.on(document,fo,Ri,function(i){(i.target.tagName==="A"||i.delegateTarget&&i.delegateTarget.tagName==="A")&&i.preventDefault();for(const t of D.getMultipleElementsFromSelector(this))Be.getOrCreateInstance(t,{toggle:!1}).toggle()}),vt(Be);var xt="top",Mt="bottom",kt="right",Nt="left",zn="auto",We=[xt,Mt,kt,Nt],ye="start",ze="end",Er="clippingParents",Li="viewport",Ke="popper",yr="reference",Pi=We.reduce(function(i,t){return i.concat([t+"-"+ye,t+"-"+ze])},[]),Mi=[].concat(We,[zn]).reduce(function(i,t){return i.concat([t,t+"-"+ye,t+"-"+ze])},[]),Ar="beforeRead",br="read",Tr="afterRead",Or="beforeMain",wr="main",$r="afterMain",Cr="beforeWrite",Sr="write",xr="afterWrite",Nr=[Ar,br,Tr,Or,wr,$r,Cr,Sr,xr];function te(i){return i?(i.nodeName||"").toLowerCase():null}function Ht(i){if(i==null)return window;if(i.toString()!=="[object Window]"){var t=i.ownerDocument;return t&&t.defaultView||window}return i}function Ae(i){var t=Ht(i).Element;return i instanceof t||i instanceof Element}function Bt(i){var t=Ht(i).HTMLElement;return i instanceof t||i instanceof HTMLElement}function ki(i){if(typeof ShadowRoot>"u")return!1;var t=Ht(i).ShadowRoot;return i instanceof t||i instanceof ShadowRoot}function yo(i){var t=i.state;Object.keys(t.elements).forEach(function(n){var a=t.styles[n]||{},u=t.attributes[n]||{},_=t.elements[n];!Bt(_)||!te(_)||(Object.assign(_.style,a),Object.keys(u).forEach(function(g){var v=u[g];v===!1?_.removeAttribute(g):_.setAttribute(g,v===!0?"":v)}))})}function Ao(i){var t=i.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(a){var u=t.elements[a],_=t.attributes[a]||{},g=Object.keys(t.styles.hasOwnProperty(a)?t.styles[a]:n[a]),v=g.reduce(function(A,N){return A[N]="",A},{});!Bt(u)||!te(u)||(Object.assign(u.style,v),Object.keys(_).forEach(function(A){u.removeAttribute(A)}))})}}const Hi={name:"applyStyles",enabled:!0,phase:"write",fn:yo,effect:Ao,requires:["computeStyles"]};function ee(i){return i.split("-")[0]}var be=Math.max,Kn=Math.min,Ye=Math.round;function ji(){var i=navigator.userAgentData;return i!=null&&i.brands&&Array.isArray(i.brands)?i.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Ir(){return!/^((?!chrome|android).)*safari/i.test(ji())}function qe(i,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var a=i.getBoundingClientRect(),u=1,_=1;t&&Bt(i)&&(u=i.offsetWidth>0&&Ye(a.width)/i.offsetWidth||1,_=i.offsetHeight>0&&Ye(a.height)/i.offsetHeight||1);var g=Ae(i)?Ht(i):window,v=g.visualViewport,A=!Ir()&&n,N=(a.left+(A&&v?v.offsetLeft:0))/u,T=(a.top+(A&&v?v.offsetTop:0))/_,W=a.width/u,Y=a.height/_;return{width:W,height:Y,top:T,right:N+W,bottom:T+Y,left:N,x:N,y:T}}function Vi(i){var t=qe(i),n=i.offsetWidth,a=i.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-a)<=1&&(a=t.height),{x:i.offsetLeft,y:i.offsetTop,width:n,height:a}}function Dr(i,t){var n=t.getRootNode&&t.getRootNode();if(i.contains(t))return!0;if(n&&ki(n)){var a=t;do{if(a&&i.isSameNode(a))return!0;a=a.parentNode||a.host}while(a)}return!1}function se(i){return Ht(i).getComputedStyle(i)}function bo(i){return["table","td","th"].indexOf(te(i))>=0}function he(i){return((Ae(i)?i.ownerDocument:i.document)||window.document).documentElement}function Yn(i){return te(i)==="html"?i:i.assignedSlot||i.parentNode||(ki(i)?i.host:null)||he(i)}function Rr(i){return!Bt(i)||se(i).position==="fixed"?null:i.offsetParent}function To(i){var t=/firefox/i.test(ji()),n=/Trident/i.test(ji());if(n&&Bt(i)){var a=se(i);if(a.position==="fixed")return null}var u=Yn(i);for(ki(u)&&(u=u.host);Bt(u)&&["html","body"].indexOf(te(u))<0;){var _=se(u);if(_.transform!=="none"||_.perspective!=="none"||_.contain==="paint"||["transform","perspective"].indexOf(_.willChange)!==-1||t&&_.willChange==="filter"||t&&_.filter&&_.filter!=="none")return u;u=u.parentNode}return null}function $n(i){for(var t=Ht(i),n=Rr(i);n&&bo(n)&&se(n).position==="static";)n=Rr(n);return n&&(te(n)==="html"||te(n)==="body"&&se(n).position==="static")?t:n||To(i)||t}function Fi(i){return["top","bottom"].indexOf(i)>=0?"x":"y"}function Cn(i,t,n){return be(i,Kn(t,n))}function Oo(i,t,n){var a=Cn(i,t,n);return a>n?n:a}function Lr(){return{top:0,right:0,bottom:0,left:0}}function Pr(i){return Object.assign({},Lr(),i)}function Mr(i,t){return t.reduce(function(n,a){return n[a]=i,n},{})}var wo=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,Pr(typeof t!="number"?t:Mr(t,We))};function $o(i){var t,n=i.state,a=i.name,u=i.options,_=n.elements.arrow,g=n.modifiersData.popperOffsets,v=ee(n.placement),A=Fi(v),N=[Nt,kt].indexOf(v)>=0,T=N?"height":"width";if(!(!_||!g)){var W=wo(u.padding,n),Y=Vi(_),j=A==="y"?xt:Nt,ot=A==="y"?Mt:kt,q=n.rects.reference[T]+n.rects.reference[A]-g[A]-n.rects.popper[T],tt=g[A]-n.rects.reference[A],at=$n(_),lt=at?A==="y"?at.clientHeight||0:at.clientWidth||0:0,ft=q/2-tt/2,J=W[j],nt=lt-Y[T]-W[ot],it=lt/2-Y[T]/2+ft,ct=Cn(J,it,nt),Tt=A;n.modifiersData[a]=(t={},t[Tt]=ct,t.centerOffset=ct-it,t)}}function Co(i){var t=i.state,n=i.options,a=n.element,u=a===void 0?"[data-popper-arrow]":a;u!=null&&(typeof u=="string"&&(u=t.elements.popper.querySelector(u),!u)||Dr(t.elements.popper,u)&&(t.elements.arrow=u))}const kr={name:"arrow",enabled:!0,phase:"main",fn:$o,effect:Co,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ge(i){return i.split("-")[1]}var So={top:"auto",right:"auto",bottom:"auto",left:"auto"};function xo(i,t){var n=i.x,a=i.y,u=t.devicePixelRatio||1;return{x:Ye(n*u)/u||0,y:Ye(a*u)/u||0}}function Hr(i){var t,n=i.popper,a=i.popperRect,u=i.placement,_=i.variation,g=i.offsets,v=i.position,A=i.gpuAcceleration,N=i.adaptive,T=i.roundOffsets,W=i.isFixed,Y=g.x,j=Y===void 0?0:Y,ot=g.y,q=ot===void 0?0:ot,tt=typeof T=="function"?T({x:j,y:q}):{x:j,y:q};j=tt.x,q=tt.y;var at=g.hasOwnProperty("x"),lt=g.hasOwnProperty("y"),ft=Nt,J=xt,nt=window;if(N){var it=$n(n),ct="clientHeight",Tt="clientWidth";if(it===Ht(n)&&(it=he(n),se(it).position!=="static"&&v==="absolute"&&(ct="scrollHeight",Tt="scrollWidth")),it=it,u===xt||(u===Nt||u===kt)&&_===ze){J=Mt;var mt=W&&it===nt&&nt.visualViewport?nt.visualViewport.height:it[ct];q-=mt-a.height,q*=A?1:-1}if(u===Nt||(u===xt||u===Mt)&&_===ze){ft=kt;var gt=W&&it===nt&&nt.visualViewport?nt.visualViewport.width:it[Tt];j-=gt-a.width,j*=A?1:-1}}var $t=Object.assign({position:v},N&&So),Jt=T===!0?xo({x:j,y:q},Ht(n)):{x:j,y:q};if(j=Jt.x,q=Jt.y,A){var It;return Object.assign({},$t,(It={},It[J]=lt?"0":"",It[ft]=at?"0":"",It.transform=(nt.devicePixelRatio||1)<=1?"translate("+j+"px, "+q+"px)":"translate3d("+j+"px, "+q+"px, 0)",It))}return Object.assign({},$t,(t={},t[J]=lt?q+"px":"",t[ft]=at?j+"px":"",t.transform="",t))}function No(i){var t=i.state,n=i.options,a=n.gpuAcceleration,u=a===void 0?!0:a,_=n.adaptive,g=_===void 0?!0:_,v=n.roundOffsets,A=v===void 0?!0:v,N={placement:ee(t.placement),variation:Ge(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:u,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Hr(Object.assign({},N,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:g,roundOffsets:A})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Hr(Object.assign({},N,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:A})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const Ui={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:No,data:{}};var qn={passive:!0};function Io(i){var t=i.state,n=i.instance,a=i.options,u=a.scroll,_=u===void 0?!0:u,g=a.resize,v=g===void 0?!0:g,A=Ht(t.elements.popper),N=[].concat(t.scrollParents.reference,t.scrollParents.popper);return _&&N.forEach(function(T){T.addEventListener("scroll",n.update,qn)}),v&&A.addEventListener("resize",n.update,qn),function(){_&&N.forEach(function(T){T.removeEventListener("scroll",n.update,qn)}),v&&A.removeEventListener("resize",n.update,qn)}}const Bi={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Io,data:{}};var Do={left:"right",right:"left",bottom:"top",top:"bottom"};function Gn(i){return i.replace(/left|right|bottom|top/g,function(t){return Do[t]})}var Ro={start:"end",end:"start"};function jr(i){return i.replace(/start|end/g,function(t){return Ro[t]})}function Wi(i){var t=Ht(i),n=t.pageXOffset,a=t.pageYOffset;return{scrollLeft:n,scrollTop:a}}function zi(i){return qe(he(i)).left+Wi(i).scrollLeft}function Lo(i,t){var n=Ht(i),a=he(i),u=n.visualViewport,_=a.clientWidth,g=a.clientHeight,v=0,A=0;if(u){_=u.width,g=u.height;var N=Ir();(N||!N&&t==="fixed")&&(v=u.offsetLeft,A=u.offsetTop)}return{width:_,height:g,x:v+zi(i),y:A}}function Po(i){var t,n=he(i),a=Wi(i),u=(t=i.ownerDocument)==null?void 0:t.body,_=be(n.scrollWidth,n.clientWidth,u?u.scrollWidth:0,u?u.clientWidth:0),g=be(n.scrollHeight,n.clientHeight,u?u.scrollHeight:0,u?u.clientHeight:0),v=-a.scrollLeft+zi(i),A=-a.scrollTop;return se(u||n).direction==="rtl"&&(v+=be(n.clientWidth,u?u.clientWidth:0)-_),{width:_,height:g,x:v,y:A}}function Ki(i){var t=se(i),n=t.overflow,a=t.overflowX,u=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+u+a)}function Vr(i){return["html","body","#document"].indexOf(te(i))>=0?i.ownerDocument.body:Bt(i)&&Ki(i)?i:Vr(Yn(i))}function Sn(i,t){var n;t===void 0&&(t=[]);var a=Vr(i),u=a===((n=i.ownerDocument)==null?void 0:n.body),_=Ht(a),g=u?[_].concat(_.visualViewport||[],Ki(a)?a:[]):a,v=t.concat(g);return u?v:v.concat(Sn(Yn(g)))}function Yi(i){return Object.assign({},i,{left:i.x,top:i.y,right:i.x+i.width,bottom:i.y+i.height})}function Mo(i,t){var n=qe(i,!1,t==="fixed");return n.top=n.top+i.clientTop,n.left=n.left+i.clientLeft,n.bottom=n.top+i.clientHeight,n.right=n.left+i.clientWidth,n.width=i.clientWidth,n.height=i.clientHeight,n.x=n.left,n.y=n.top,n}function Fr(i,t,n){return t===Li?Yi(Lo(i,n)):Ae(t)?Mo(t,n):Yi(Po(he(i)))}function ko(i){var t=Sn(Yn(i)),n=["absolute","fixed"].indexOf(se(i).position)>=0,a=n&&Bt(i)?$n(i):i;return Ae(a)?t.filter(function(u){return Ae(u)&&Dr(u,a)&&te(u)!=="body"}):[]}function Ho(i,t,n,a){var u=t==="clippingParents"?ko(i):[].concat(t),_=[].concat(u,[n]),g=_[0],v=_.reduce(function(A,N){var T=Fr(i,N,a);return A.top=be(T.top,A.top),A.right=Kn(T.right,A.right),A.bottom=Kn(T.bottom,A.bottom),A.left=be(T.left,A.left),A},Fr(i,g,a));return v.width=v.right-v.left,v.height=v.bottom-v.top,v.x=v.left,v.y=v.top,v}function Ur(i){var t=i.reference,n=i.element,a=i.placement,u=a?ee(a):null,_=a?Ge(a):null,g=t.x+t.width/2-n.width/2,v=t.y+t.height/2-n.height/2,A;switch(u){case xt:A={x:g,y:t.y-n.height};break;case Mt:A={x:g,y:t.y+t.height};break;case kt:A={x:t.x+t.width,y:v};break;case Nt:A={x:t.x-n.width,y:v};break;default:A={x:t.x,y:t.y}}var N=u?Fi(u):null;if(N!=null){var T=N==="y"?"height":"width";switch(_){case ye:A[N]=A[N]-(t[T]/2-n[T]/2);break;case ze:A[N]=A[N]+(t[T]/2-n[T]/2);break}}return A}function Je(i,t){t===void 0&&(t={});var n=t,a=n.placement,u=a===void 0?i.placement:a,_=n.strategy,g=_===void 0?i.strategy:_,v=n.boundary,A=v===void 0?Er:v,N=n.rootBoundary,T=N===void 0?Li:N,W=n.elementContext,Y=W===void 0?Ke:W,j=n.altBoundary,ot=j===void 0?!1:j,q=n.padding,tt=q===void 0?0:q,at=Pr(typeof tt!="number"?tt:Mr(tt,We)),lt=Y===Ke?yr:Ke,ft=i.rects.popper,J=i.elements[ot?lt:Y],nt=Ho(Ae(J)?J:J.contextElement||he(i.elements.popper),A,T,g),it=qe(i.elements.reference),ct=Ur({reference:it,element:ft,strategy:"absolute",placement:u}),Tt=Yi(Object.assign({},ft,ct)),mt=Y===Ke?Tt:it,gt={top:nt.top-mt.top+at.top,bottom:mt.bottom-nt.bottom+at.bottom,left:nt.left-mt.left+at.left,right:mt.right-nt.right+at.right},$t=i.modifiersData.offset;if(Y===Ke&&$t){var Jt=$t[u];Object.keys(gt).forEach(function(It){var Ne=[kt,Mt].indexOf(It)>=0?1:-1,Ie=[xt,Mt].indexOf(It)>=0?"y":"x";gt[It]+=Jt[Ie]*Ne})}return gt}function jo(i,t){t===void 0&&(t={});var n=t,a=n.placement,u=n.boundary,_=n.rootBoundary,g=n.padding,v=n.flipVariations,A=n.allowedAutoPlacements,N=A===void 0?Mi:A,T=Ge(a),W=T?v?Pi:Pi.filter(function(ot){return Ge(ot)===T}):We,Y=W.filter(function(ot){return N.indexOf(ot)>=0});Y.length===0&&(Y=W);var j=Y.reduce(function(ot,q){return ot[q]=Je(i,{placement:q,boundary:u,rootBoundary:_,padding:g})[ee(q)],ot},{});return Object.keys(j).sort(function(ot,q){return j[ot]-j[q]})}function Vo(i){if(ee(i)===zn)return[];var t=Gn(i);return[jr(i),t,jr(t)]}function Fo(i){var t=i.state,n=i.options,a=i.name;if(!t.modifiersData[a]._skip){for(var u=n.mainAxis,_=u===void 0?!0:u,g=n.altAxis,v=g===void 0?!0:g,A=n.fallbackPlacements,N=n.padding,T=n.boundary,W=n.rootBoundary,Y=n.altBoundary,j=n.flipVariations,ot=j===void 0?!0:j,q=n.allowedAutoPlacements,tt=t.options.placement,at=ee(tt),lt=at===tt,ft=A||(lt||!ot?[Gn(tt)]:Vo(tt)),J=[tt].concat(ft).reduce(function(Ze,pe){return Ze.concat(ee(pe)===zn?jo(t,{placement:pe,boundary:T,rootBoundary:W,padding:N,flipVariations:ot,allowedAutoPlacements:q}):pe)},[]),nt=t.rects.reference,it=t.rects.popper,ct=new Map,Tt=!0,mt=J[0],gt=0;gt<J.length;gt++){var $t=J[gt],Jt=ee($t),It=Ge($t)===ye,Ne=[xt,Mt].indexOf(Jt)>=0,Ie=Ne?"width":"height",jt=Je(t,{placement:$t,boundary:T,rootBoundary:W,altBoundary:Y,padding:N}),Xt=Ne?It?kt:Nt:It?Mt:xt;nt[Ie]>it[Ie]&&(Xt=Gn(Xt));var ri=Gn(Xt),De=[];if(_&&De.push(jt[Jt]<=0),v&&De.push(jt[Xt]<=0,jt[ri]<=0),De.every(function(Ze){return Ze})){mt=$t,Tt=!1;break}ct.set($t,De)}if(Tt)for(var si=ot?3:1,ar=function(pe){var Rn=J.find(function(ai){var Re=ct.get(ai);if(Re)return Re.slice(0,pe).every(function(cr){return cr})});if(Rn)return mt=Rn,"break"},Dn=si;Dn>0;Dn--){var oi=ar(Dn);if(oi==="break")break}t.placement!==mt&&(t.modifiersData[a]._skip=!0,t.placement=mt,t.reset=!0)}}const Br={name:"flip",enabled:!0,phase:"main",fn:Fo,requiresIfExists:["offset"],data:{_skip:!1}};function Wr(i,t,n){return n===void 0&&(n={x:0,y:0}),{top:i.top-t.height-n.y,right:i.right-t.width+n.x,bottom:i.bottom-t.height+n.y,left:i.left-t.width-n.x}}function zr(i){return[xt,kt,Mt,Nt].some(function(t){return i[t]>=0})}function Uo(i){var t=i.state,n=i.name,a=t.rects.reference,u=t.rects.popper,_=t.modifiersData.preventOverflow,g=Je(t,{elementContext:"reference"}),v=Je(t,{altBoundary:!0}),A=Wr(g,a),N=Wr(v,u,_),T=zr(A),W=zr(N);t.modifiersData[n]={referenceClippingOffsets:A,popperEscapeOffsets:N,isReferenceHidden:T,hasPopperEscaped:W},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":T,"data-popper-escaped":W})}const Kr={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Uo};function Bo(i,t,n){var a=ee(i),u=[Nt,xt].indexOf(a)>=0?-1:1,_=typeof n=="function"?n(Object.assign({},t,{placement:i})):n,g=_[0],v=_[1];return g=g||0,v=(v||0)*u,[Nt,kt].indexOf(a)>=0?{x:v,y:g}:{x:g,y:v}}function Wo(i){var t=i.state,n=i.options,a=i.name,u=n.offset,_=u===void 0?[0,0]:u,g=Mi.reduce(function(T,W){return T[W]=Bo(W,t.rects,_),T},{}),v=g[t.placement],A=v.x,N=v.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=A,t.modifiersData.popperOffsets.y+=N),t.modifiersData[a]=g}const Yr={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Wo};function zo(i){var t=i.state,n=i.name;t.modifiersData[n]=Ur({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const qi={name:"popperOffsets",enabled:!0,phase:"read",fn:zo,data:{}};function Ko(i){return i==="x"?"y":"x"}function Yo(i){var t=i.state,n=i.options,a=i.name,u=n.mainAxis,_=u===void 0?!0:u,g=n.altAxis,v=g===void 0?!1:g,A=n.boundary,N=n.rootBoundary,T=n.altBoundary,W=n.padding,Y=n.tether,j=Y===void 0?!0:Y,ot=n.tetherOffset,q=ot===void 0?0:ot,tt=Je(t,{boundary:A,rootBoundary:N,padding:W,altBoundary:T}),at=ee(t.placement),lt=Ge(t.placement),ft=!lt,J=Fi(at),nt=Ko(J),it=t.modifiersData.popperOffsets,ct=t.rects.reference,Tt=t.rects.popper,mt=typeof q=="function"?q(Object.assign({},t.rects,{placement:t.placement})):q,gt=typeof mt=="number"?{mainAxis:mt,altAxis:mt}:Object.assign({mainAxis:0,altAxis:0},mt),$t=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,Jt={x:0,y:0};if(it){if(_){var It,Ne=J==="y"?xt:Nt,Ie=J==="y"?Mt:kt,jt=J==="y"?"height":"width",Xt=it[J],ri=Xt+tt[Ne],De=Xt-tt[Ie],si=j?-Tt[jt]/2:0,ar=lt===ye?ct[jt]:Tt[jt],Dn=lt===ye?-Tt[jt]:-ct[jt],oi=t.elements.arrow,Ze=j&&oi?Vi(oi):{width:0,height:0},pe=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Lr(),Rn=pe[Ne],ai=pe[Ie],Re=Cn(0,ct[jt],Ze[jt]),cr=ft?ct[jt]/2-si-Re-Rn-gt.mainAxis:ar-Re-Rn-gt.mainAxis,Vl=ft?-ct[jt]/2+si+Re+ai+gt.mainAxis:Dn+Re+ai+gt.mainAxis,lr=t.elements.arrow&&$n(t.elements.arrow),Fl=lr?J==="y"?lr.clientTop||0:lr.clientLeft||0:0,Ps=(It=$t==null?void 0:$t[J])!=null?It:0,Ul=Xt+cr-Ps-Fl,Bl=Xt+Vl-Ps,Ms=Cn(j?Kn(ri,Ul):ri,Xt,j?be(De,Bl):De);it[J]=Ms,Jt[J]=Ms-Xt}if(v){var ks,Wl=J==="x"?xt:Nt,zl=J==="x"?Mt:kt,Le=it[nt],ci=nt==="y"?"height":"width",Hs=Le+tt[Wl],js=Le-tt[zl],fr=[xt,Nt].indexOf(at)!==-1,Vs=(ks=$t==null?void 0:$t[nt])!=null?ks:0,Fs=fr?Hs:Le-ct[ci]-Tt[ci]-Vs+gt.altAxis,Us=fr?Le+ct[ci]+Tt[ci]-Vs-gt.altAxis:js,Bs=j&&fr?Oo(Fs,Le,Us):Cn(j?Fs:Hs,Le,j?Us:js);it[nt]=Bs,Jt[nt]=Bs-Le}t.modifiersData[a]=Jt}}const qr={name:"preventOverflow",enabled:!0,phase:"main",fn:Yo,requiresIfExists:["offset"]};function qo(i){return{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}}function Go(i){return i===Ht(i)||!Bt(i)?Wi(i):qo(i)}function Jo(i){var t=i.getBoundingClientRect(),n=Ye(t.width)/i.offsetWidth||1,a=Ye(t.height)/i.offsetHeight||1;return n!==1||a!==1}function Xo(i,t,n){n===void 0&&(n=!1);var a=Bt(t),u=Bt(t)&&Jo(t),_=he(t),g=qe(i,u,n),v={scrollLeft:0,scrollTop:0},A={x:0,y:0};return(a||!a&&!n)&&((te(t)!=="body"||Ki(_))&&(v=Go(t)),Bt(t)?(A=qe(t,!0),A.x+=t.clientLeft,A.y+=t.clientTop):_&&(A.x=zi(_))),{x:g.left+v.scrollLeft-A.x,y:g.top+v.scrollTop-A.y,width:g.width,height:g.height}}function Qo(i){var t=new Map,n=new Set,a=[];i.forEach(function(_){t.set(_.name,_)});function u(_){n.add(_.name);var g=[].concat(_.requires||[],_.requiresIfExists||[]);g.forEach(function(v){if(!n.has(v)){var A=t.get(v);A&&u(A)}}),a.push(_)}return i.forEach(function(_){n.has(_.name)||u(_)}),a}function Zo(i){var t=Qo(i);return Nr.reduce(function(n,a){return n.concat(t.filter(function(u){return u.phase===a}))},[])}function ta(i){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(i())})})),t}}function ea(i){var t=i.reduce(function(n,a){var u=n[a.name];return n[a.name]=u?Object.assign({},u,a,{options:Object.assign({},u.options,a.options),data:Object.assign({},u.data,a.data)}):a,n},{});return Object.keys(t).map(function(n){return t[n]})}var Gr={placement:"bottom",modifiers:[],strategy:"absolute"};function Jr(){for(var i=arguments.length,t=new Array(i),n=0;n<i;n++)t[n]=arguments[n];return!t.some(function(a){return!(a&&typeof a.getBoundingClientRect=="function")})}function Jn(i){i===void 0&&(i={});var t=i,n=t.defaultModifiers,a=n===void 0?[]:n,u=t.defaultOptions,_=u===void 0?Gr:u;return function(v,A,N){N===void 0&&(N=_);var T={placement:"bottom",orderedModifiers:[],options:Object.assign({},Gr,_),modifiersData:{},elements:{reference:v,popper:A},attributes:{},styles:{}},W=[],Y=!1,j={state:T,setOptions:function(at){var lt=typeof at=="function"?at(T.options):at;q(),T.options=Object.assign({},_,T.options,lt),T.scrollParents={reference:Ae(v)?Sn(v):v.contextElement?Sn(v.contextElement):[],popper:Sn(A)};var ft=Zo(ea([].concat(a,T.options.modifiers)));return T.orderedModifiers=ft.filter(function(J){return J.enabled}),ot(),j.update()},forceUpdate:function(){if(!Y){var at=T.elements,lt=at.reference,ft=at.popper;if(Jr(lt,ft)){T.rects={reference:Xo(lt,$n(ft),T.options.strategy==="fixed"),popper:Vi(ft)},T.reset=!1,T.placement=T.options.placement,T.orderedModifiers.forEach(function(gt){return T.modifiersData[gt.name]=Object.assign({},gt.data)});for(var J=0;J<T.orderedModifiers.length;J++){if(T.reset===!0){T.reset=!1,J=-1;continue}var nt=T.orderedModifiers[J],it=nt.fn,ct=nt.options,Tt=ct===void 0?{}:ct,mt=nt.name;typeof it=="function"&&(T=it({state:T,options:Tt,name:mt,instance:j})||T)}}}},update:ta(function(){return new Promise(function(tt){j.forceUpdate(),tt(T)})}),destroy:function(){q(),Y=!0}};if(!Jr(v,A))return j;j.setOptions(N).then(function(tt){!Y&&N.onFirstUpdate&&N.onFirstUpdate(tt)});function ot(){T.orderedModifiers.forEach(function(tt){var at=tt.name,lt=tt.options,ft=lt===void 0?{}:lt,J=tt.effect;if(typeof J=="function"){var nt=J({state:T,name:at,instance:j,options:ft}),it=function(){};W.push(nt||it)}})}function q(){W.forEach(function(tt){return tt()}),W=[]}return j}}var na=Jn(),ia=[Bi,qi,Ui,Hi],ra=Jn({defaultModifiers:ia}),sa=[Bi,qi,Ui,Hi,Yr,Br,qr,kr,Kr],Gi=Jn({defaultModifiers:sa});const Xr=Object.freeze(Object.defineProperty({__proto__:null,afterMain:$r,afterRead:Tr,afterWrite:xr,applyStyles:Hi,arrow:kr,auto:zn,basePlacements:We,beforeMain:Or,beforeRead:Ar,beforeWrite:Cr,bottom:Mt,clippingParents:Er,computeStyles:Ui,createPopper:Gi,createPopperBase:na,createPopperLite:ra,detectOverflow:Je,end:ze,eventListeners:Bi,flip:Br,hide:Kr,left:Nt,main:wr,modifierPhases:Nr,offset:Yr,placements:Mi,popper:Ke,popperGenerator:Jn,popperOffsets:qi,preventOverflow:qr,read:br,reference:yr,right:kt,start:ye,top:xt,variationPlacements:Pi,viewport:Li,write:Sr},Symbol.toStringTag,{value:"Module"})),Qr="dropdown",Te=".bs.dropdown",Ji=".data-api",oa="Escape",Zr="Tab",aa="ArrowUp",ts="ArrowDown",ca=2,la=`hide${Te}`,fa=`hidden${Te}`,ua=`show${Te}`,ha=`shown${Te}`,es=`click${Te}${Ji}`,ns=`keydown${Te}${Ji}`,da=`keyup${Te}${Ji}`,Xe="show",pa="dropup",_a="dropend",ga="dropstart",ma="dropup-center",va="dropdown-center",Oe='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Ea=`${Oe}.${Xe}`,Xn=".dropdown-menu",ya=".navbar",Aa=".navbar-nav",ba=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",Ta=Dt()?"top-end":"top-start",Oa=Dt()?"top-start":"top-end",wa=Dt()?"bottom-end":"bottom-start",$a=Dt()?"bottom-start":"bottom-end",Ca=Dt()?"left-start":"right-start",Sa=Dt()?"right-start":"left-start",xa="top",Na="bottom",Ia={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Da={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Gt extends Lt{constructor(t,n){super(t,n),this._popper=null,this._parent=this._element.parentNode,this._menu=D.next(this._element,Xn)[0]||D.prev(this._element,Xn)[0]||D.findOne(Xn,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Ia}static get DefaultType(){return Da}static get NAME(){return Qr}toggle(){return this._isShown()?this.hide():this.show()}show(){if(X(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!y.trigger(this._element,ua,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(Aa))for(const a of[].concat(...document.body.children))y.on(a,"mouseover",ut);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Xe),this._element.classList.add(Xe),y.trigger(this._element,ha,t)}}hide(){if(X(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!y.trigger(this._element,la,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const a of[].concat(...document.body.children))y.off(a,"mouseover",ut);this._popper&&this._popper.destroy(),this._menu.classList.remove(Xe),this._element.classList.remove(Xe),this._element.setAttribute("aria-expanded","false"),Rt.removeDataAttribute(this._menu,"popper"),y.trigger(this._element,fa,t)}}_getConfig(t){if(t=super._getConfig(t),typeof t.reference=="object"&&!k(t.reference)&&typeof t.reference.getBoundingClientRect!="function")throw new TypeError(`${Qr.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(typeof Xr>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;this._config.reference==="parent"?t=this._parent:k(this._config.reference)?t=Q(this._config.reference):typeof this._config.reference=="object"&&(t=this._config.reference);const n=this._getPopperConfig();this._popper=Gi(t,this._menu,n)}_isShown(){return this._menu.classList.contains(Xe)}_getPlacement(){const t=this._parent;if(t.classList.contains(_a))return Ca;if(t.classList.contains(ga))return Sa;if(t.classList.contains(ma))return xa;if(t.classList.contains(va))return Na;const n=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return t.classList.contains(pa)?n?Oa:Ta:n?$a:wa}_detectNavbar(){return this._element.closest(ya)!==null}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(n=>Number.parseInt(n,10)):typeof t=="function"?n=>t(n,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Rt.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...Et(this._config.popperConfig,[t])}}_selectMenuItem({key:t,target:n}){const a=D.find(ba,this._menu).filter(u=>et(u));a.length&&an(a,n,t===ts,!a.includes(n)).focus()}static jQueryInterface(t){return this.each(function(){const n=Gt.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}static clearMenus(t){if(t.button===ca||t.type==="keyup"&&t.key!==Zr)return;const n=D.find(Ea);for(const a of n){const u=Gt.getInstance(a);if(!u||u._config.autoClose===!1)continue;const _=t.composedPath(),g=_.includes(u._menu);if(_.includes(u._element)||u._config.autoClose==="inside"&&!g||u._config.autoClose==="outside"&&g||u._menu.contains(t.target)&&(t.type==="keyup"&&t.key===Zr||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const v={relatedTarget:u._element};t.type==="click"&&(v.clickEvent=t),u._completeHide(v)}}static dataApiKeydownHandler(t){const n=/input|textarea/i.test(t.target.tagName),a=t.key===oa,u=[aa,ts].includes(t.key);if(!u&&!a||n&&!a)return;t.preventDefault();const _=this.matches(Oe)?this:D.prev(this,Oe)[0]||D.next(this,Oe)[0]||D.findOne(Oe,t.delegateTarget.parentNode),g=Gt.getOrCreateInstance(_);if(u){t.stopPropagation(),g.show(),g._selectMenuItem(t);return}g._isShown()&&(t.stopPropagation(),g.hide(),_.focus())}}y.on(document,ns,Oe,Gt.dataApiKeydownHandler),y.on(document,ns,Xn,Gt.dataApiKeydownHandler),y.on(document,es,Gt.clearMenus),y.on(document,da,Gt.clearMenus),y.on(document,es,Oe,function(i){i.preventDefault(),Gt.getOrCreateInstance(this).toggle()}),vt(Gt);const is="backdrop",Ra="fade",rs="show",ss=`mousedown.bs.${is}`,La={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Pa={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class os extends ht{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return La}static get DefaultType(){return Pa}static get NAME(){return is}show(t){if(!this._config.isVisible){Et(t);return}this._append();const n=this._getElement();this._config.isAnimated&&St(n),n.classList.add(rs),this._emulateAnimation(()=>{Et(t)})}hide(t){if(!this._config.isVisible){Et(t);return}this._getElement().classList.remove(rs),this._emulateAnimation(()=>{this.dispose(),Et(t)})}dispose(){this._isAppended&&(y.off(this._element,ss),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add(Ra),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=Q(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),y.on(t,ss,()=>{Et(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(t){wt(t,this._getElement(),this._config.isAnimated)}}const Ma="focustrap",Qn=".bs.focustrap",ka=`focusin${Qn}`,Ha=`keydown.tab${Qn}`,ja="Tab",Va="forward",as="backward",Fa={autofocus:!0,trapElement:null},Ua={autofocus:"boolean",trapElement:"element"};class cs extends ht{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Fa}static get DefaultType(){return Ua}static get NAME(){return Ma}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),y.off(document,Qn),y.on(document,ka,t=>this._handleFocusin(t)),y.on(document,Ha,t=>this._handleKeydown(t)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,y.off(document,Qn))}_handleFocusin(t){const{trapElement:n}=this._config;if(t.target===document||t.target===n||n.contains(t.target))return;const a=D.focusableChildren(n);a.length===0?n.focus():this._lastTabNavDirection===as?a[a.length-1].focus():a[0].focus()}_handleKeydown(t){t.key===ja&&(this._lastTabNavDirection=t.shiftKey?as:Va)}}const ls=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",fs=".sticky-top",Zn="padding-right",us="margin-right";class Xi{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Zn,n=>n+t),this._setElementAttributes(ls,Zn,n=>n+t),this._setElementAttributes(fs,us,n=>n-t)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Zn),this._resetElementAttributes(ls,Zn),this._resetElementAttributes(fs,us)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,n,a){const u=this.getWidth(),_=g=>{if(g!==this._element&&window.innerWidth>g.clientWidth+u)return;this._saveInitialAttribute(g,n);const v=window.getComputedStyle(g).getPropertyValue(n);g.style.setProperty(n,`${a(Number.parseFloat(v))}px`)};this._applyManipulationCallback(t,_)}_saveInitialAttribute(t,n){const a=t.style.getPropertyValue(n);a&&Rt.setDataAttribute(t,n,a)}_resetElementAttributes(t,n){const a=u=>{const _=Rt.getDataAttribute(u,n);if(_===null){u.style.removeProperty(n);return}Rt.removeDataAttribute(u,n),u.style.setProperty(n,_)};this._applyManipulationCallback(t,a)}_applyManipulationCallback(t,n){if(k(t)){n(t);return}for(const a of D.find(t,this._element))n(a)}}const Ba="modal",Wt=".bs.modal",Wa=".data-api",za="Escape",Ka=`hide${Wt}`,Ya=`hidePrevented${Wt}`,hs=`hidden${Wt}`,ds=`show${Wt}`,qa=`shown${Wt}`,Ga=`resize${Wt}`,Ja=`click.dismiss${Wt}`,Xa=`mousedown.dismiss${Wt}`,Qa=`keydown.dismiss${Wt}`,Za=`click${Wt}${Wa}`,ps="modal-open",tc="fade",_s="show",Qi="modal-static",ec=".modal.show",nc=".modal-dialog",ic=".modal-body",rc='[data-bs-toggle="modal"]',sc={backdrop:!0,focus:!0,keyboard:!0},oc={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class we extends Lt{constructor(t,n){super(t,n),this._dialog=D.findOne(nc,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Xi,this._addEventListeners()}static get Default(){return sc}static get DefaultType(){return oc}static get NAME(){return Ba}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||y.trigger(this._element,ds,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(ps),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){!this._isShown||this._isTransitioning||y.trigger(this._element,Ka).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(_s),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){y.off(window,Wt),y.off(this._dialog,Wt),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new os({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new cs({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const n=D.findOne(ic,this._dialog);n&&(n.scrollTop=0),St(this._element),this._element.classList.add(_s);const a=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,y.trigger(this._element,qa,{relatedTarget:t})};this._queueCallback(a,this._dialog,this._isAnimated())}_addEventListeners(){y.on(this._element,Qa,t=>{if(t.key===za){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),y.on(window,Ga,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),y.on(this._element,Xa,t=>{y.one(this._element,Ja,n=>{if(!(this._element!==t.target||this._element!==n.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(ps),this._resetAdjustments(),this._scrollBar.reset(),y.trigger(this._element,hs)})}_isAnimated(){return this._element.classList.contains(tc)}_triggerBackdropTransition(){if(y.trigger(this._element,Ya).defaultPrevented)return;const n=this._element.scrollHeight>document.documentElement.clientHeight,a=this._element.style.overflowY;a==="hidden"||this._element.classList.contains(Qi)||(n||(this._element.style.overflowY="hidden"),this._element.classList.add(Qi),this._queueCallback(()=>{this._element.classList.remove(Qi),this._queueCallback(()=>{this._element.style.overflowY=a},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,n=this._scrollBar.getWidth(),a=n>0;if(a&&!t){const u=Dt()?"paddingLeft":"paddingRight";this._element.style[u]=`${n}px`}if(!a&&t){const u=Dt()?"paddingRight":"paddingLeft";this._element.style[u]=`${n}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,n){return this.each(function(){const a=we.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof a[t]>"u")throw new TypeError(`No method named "${t}"`);a[t](n)}})}}y.on(document,Za,rc,function(i){const t=D.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&i.preventDefault(),y.one(t,ds,u=>{u.defaultPrevented||y.one(t,hs,()=>{et(this)&&this.focus()})});const n=D.findOne(ec);n&&we.getInstance(n).hide(),we.getOrCreateInstance(t).toggle(this)}),ve(we),vt(we);const ac="offcanvas",oe=".bs.offcanvas",gs=".data-api",lc=`load${oe}${gs}`,fc="Escape",ms="show",vs="showing",Es="hiding",uc="offcanvas-backdrop",ys=".offcanvas.show",hc=`show${oe}`,dc=`shown${oe}`,pc=`hide${oe}`,As=`hidePrevented${oe}`,bs=`hidden${oe}`,_c=`resize${oe}`,gc=`click${oe}${gs}`,mc=`keydown.dismiss${oe}`,vc='[data-bs-toggle="offcanvas"]',Ec={backdrop:!0,keyboard:!0,scroll:!1},yc={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class ae extends Lt{constructor(t,n){super(t,n),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Ec}static get DefaultType(){return yc}static get NAME(){return ac}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||y.trigger(this._element,hc,{relatedTarget:t}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new Xi().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(vs);const a=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(ms),this._element.classList.remove(vs),y.trigger(this._element,dc,{relatedTarget:t})};this._queueCallback(a,this._element,!0)}hide(){if(!this._isShown||y.trigger(this._element,pc).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Es),this._backdrop.hide();const n=()=>{this._element.classList.remove(ms,Es),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Xi().reset(),y.trigger(this._element,bs)};this._queueCallback(n,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=()=>{if(this._config.backdrop==="static"){y.trigger(this._element,As);return}this.hide()},n=!!this._config.backdrop;return new os({className:uc,isVisible:n,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:n?t:null})}_initializeFocusTrap(){return new cs({trapElement:this._element})}_addEventListeners(){y.on(this._element,mc,t=>{if(t.key===fc){if(this._config.keyboard){this.hide();return}y.trigger(this._element,As)}})}static jQueryInterface(t){return this.each(function(){const n=ae.getOrCreateInstance(this,t);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t](this)}})}}y.on(document,gc,vc,function(i){const t=D.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&i.preventDefault(),X(this))return;y.one(t,bs,()=>{et(this)&&this.focus()});const n=D.findOne(ys);n&&n!==t&&ae.getInstance(n).hide(),ae.getOrCreateInstance(t).toggle(this)}),y.on(window,lc,()=>{for(const i of D.find(ys))ae.getOrCreateInstance(i).show()}),y.on(window,_c,()=>{for(const i of D.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(i).position!=="fixed"&&ae.getOrCreateInstance(i).hide()}),ve(ae),vt(ae);const Ts={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Ac=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),bc=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Tc=(i,t)=>{const n=i.nodeName.toLowerCase();return t.includes(n)?Ac.has(n)?!!bc.test(i.nodeValue):!0:t.filter(a=>a instanceof RegExp).some(a=>a.test(n))};function Oc(i,t,n){if(!i.length)return i;if(n&&typeof n=="function")return n(i);const u=new window.DOMParser().parseFromString(i,"text/html"),_=[].concat(...u.body.querySelectorAll("*"));for(const g of _){const v=g.nodeName.toLowerCase();if(!Object.keys(t).includes(v)){g.remove();continue}const A=[].concat(...g.attributes),N=[].concat(t["*"]||[],t[v]||[]);for(const T of A)Tc(T,N)||g.removeAttribute(T.nodeName)}return u.body.innerHTML}const wc="TemplateFactory",$c={allowList:Ts,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Cc={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Sc={entry:"(string|element|function|null)",selector:"(string|element)"};class xc extends ht{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return $c}static get DefaultType(){return Cc}static get NAME(){return wc}getContent(){return Object.values(this._config.content).map(t=>this._resolvePossibleFunction(t)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[u,_]of Object.entries(this._config.content))this._setContent(t,_,u);const n=t.children[0],a=this._resolvePossibleFunction(this._config.extraClass);return a&&n.classList.add(...a.split(" ")),n}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[n,a]of Object.entries(t))super._typeCheckConfig({selector:n,entry:a},Sc)}_setContent(t,n,a){const u=D.findOne(a,t);if(u){if(n=this._resolvePossibleFunction(n),!n){u.remove();return}if(k(n)){this._putElementInTemplate(Q(n),u);return}if(this._config.html){u.innerHTML=this._maybeSanitize(n);return}u.textContent=n}}_maybeSanitize(t){return this._config.sanitize?Oc(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return Et(t,[this])}_putElementInTemplate(t,n){if(this._config.html){n.innerHTML="",n.append(t);return}n.textContent=t.textContent}}const Nc="tooltip",Ic=new Set(["sanitize","allowList","sanitizeFn"]),Zi="fade",Dc="modal",ti="show",Rc=".tooltip-inner",Os=`.${Dc}`,ws="hide.bs.modal",xn="hover",tr="focus",Lc="click",Pc="manual",Mc="hide",kc="hidden",Hc="show",jc="shown",Vc="inserted",Fc="click",Uc="focusin",Bc="focusout",Wc="mouseenter",zc="mouseleave",Kc={AUTO:"auto",TOP:"top",RIGHT:Dt()?"left":"right",BOTTOM:"bottom",LEFT:Dt()?"right":"left"},Yc={allowList:Ts,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},qc={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class $e extends Lt{constructor(t,n){if(typeof Xr>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t,n),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Yc}static get DefaultType(){return qc}static get NAME(){return Nc}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),y.off(this._element.closest(Os),ws,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const t=y.trigger(this._element,this.constructor.eventName(Hc)),a=(ce(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!a)return;this._disposePopper();const u=this._getTipElement();this._element.setAttribute("aria-describedby",u.getAttribute("id"));const{container:_}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(_.append(u),y.trigger(this._element,this.constructor.eventName(Vc))),this._popper=this._createPopper(u),u.classList.add(ti),"ontouchstart"in document.documentElement)for(const v of[].concat(...document.body.children))y.on(v,"mouseover",ut);const g=()=>{y.trigger(this._element,this.constructor.eventName(jc)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(g,this.tip,this._isAnimated())}hide(){if(!this._isShown()||y.trigger(this._element,this.constructor.eventName(Mc)).defaultPrevented)return;if(this._getTipElement().classList.remove(ti),"ontouchstart"in document.documentElement)for(const u of[].concat(...document.body.children))y.off(u,"mouseover",ut);this._activeTrigger[Lc]=!1,this._activeTrigger[tr]=!1,this._activeTrigger[xn]=!1,this._isHovered=null;const a=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),y.trigger(this._element,this.constructor.eventName(kc)))};this._queueCallback(a,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const n=this._getTemplateFactory(t).toHtml();if(!n)return null;n.classList.remove(Zi,ti),n.classList.add(`bs-${this.constructor.NAME}-auto`);const a=C(this.constructor.NAME).toString();return n.setAttribute("id",a),this._isAnimated()&&n.classList.add(Zi),n}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new xc({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Rc]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Zi)}_isShown(){return this.tip&&this.tip.classList.contains(ti)}_createPopper(t){const n=Et(this._config.placement,[this,t,this._element]),a=Kc[n.toUpperCase()];return Gi(this._element,t,this._getPopperConfig(a))}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(n=>Number.parseInt(n,10)):typeof t=="function"?n=>t(n,this._element):t}_resolvePossibleFunction(t){return Et(t,[this._element])}_getPopperConfig(t){const n={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:a=>{this._getTipElement().setAttribute("data-popper-placement",a.state.placement)}}]};return{...n,...Et(this._config.popperConfig,[n])}}_setListeners(){const t=this._config.trigger.split(" ");for(const n of t)if(n==="click")y.on(this._element,this.constructor.eventName(Fc),this._config.selector,a=>{this._initializeOnDelegatedTarget(a).toggle()});else if(n!==Pc){const a=n===xn?this.constructor.eventName(Wc):this.constructor.eventName(Uc),u=n===xn?this.constructor.eventName(zc):this.constructor.eventName(Bc);y.on(this._element,a,this._config.selector,_=>{const g=this._initializeOnDelegatedTarget(_);g._activeTrigger[_.type==="focusin"?tr:xn]=!0,g._enter()}),y.on(this._element,u,this._config.selector,_=>{const g=this._initializeOnDelegatedTarget(_);g._activeTrigger[_.type==="focusout"?tr:xn]=g._element.contains(_.relatedTarget),g._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},y.on(this._element.closest(Os),ws,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(t,n){clearTimeout(this._timeout),this._timeout=setTimeout(t,n)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const n=Rt.getDataAttributes(this._element);for(const a of Object.keys(n))Ic.has(a)&&delete n[a];return t={...n,...typeof t=="object"&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=t.container===!1?document.body:Q(t.container),typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),typeof t.title=="number"&&(t.title=t.title.toString()),typeof t.content=="number"&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const[n,a]of Object.entries(this._config))this.constructor.Default[n]!==a&&(t[n]=a);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each(function(){const n=$e.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}}vt($e);const Gc="popover",Jc=".popover-header",Xc=".popover-body",Qc={...$e.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Zc={...$e.DefaultType,content:"(null|string|element|function)"};class ei extends $e{static get Default(){return Qc}static get DefaultType(){return Zc}static get NAME(){return Gc}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Jc]:this._getTitle(),[Xc]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each(function(){const n=ei.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}}vt(ei);const tl="scrollspy",er=".bs.scrollspy",el=".data-api",nl=`activate${er}`,$s=`click${er}`,il=`load${er}${el}`,rl="dropdown-item",Qe="active",sl='[data-bs-spy="scroll"]',nr="[href]",ol=".nav, .list-group",Cs=".nav-link",al=`${Cs}, .nav-item > ${Cs}, .list-group-item`,cl=".dropdown",ll=".dropdown-toggle",fl={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},ul={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Nn extends Lt{constructor(t,n){super(t,n),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return fl}static get DefaultType(){return ul}static get NAME(){return tl}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=Q(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,typeof t.threshold=="string"&&(t.threshold=t.threshold.split(",").map(n=>Number.parseFloat(n))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(y.off(this._config.target,$s),y.on(this._config.target,$s,nr,t=>{const n=this._observableSections.get(t.target.hash);if(n){t.preventDefault();const a=this._rootElement||window,u=n.offsetTop-this._element.offsetTop;if(a.scrollTo){a.scrollTo({top:u,behavior:"smooth"});return}a.scrollTop=u}}))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(n=>this._observerCallback(n),t)}_observerCallback(t){const n=g=>this._targetLinks.get(`#${g.target.id}`),a=g=>{this._previousScrollData.visibleEntryTop=g.target.offsetTop,this._process(n(g))},u=(this._rootElement||document.documentElement).scrollTop,_=u>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=u;for(const g of t){if(!g.isIntersecting){this._activeTarget=null,this._clearActiveClass(n(g));continue}const v=g.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(_&&v){if(a(g),!u)return;continue}!_&&!v&&a(g)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=D.find(nr,this._config.target);for(const n of t){if(!n.hash||X(n))continue;const a=D.findOne(decodeURI(n.hash),this._element);et(a)&&(this._targetLinks.set(decodeURI(n.hash),n),this._observableSections.set(n.hash,a))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(Qe),this._activateParents(t),y.trigger(this._element,nl,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains(rl)){D.findOne(ll,t.closest(cl)).classList.add(Qe);return}for(const n of D.parents(t,ol))for(const a of D.prev(n,al))a.classList.add(Qe)}_clearActiveClass(t){t.classList.remove(Qe);const n=D.find(`${nr}.${Qe}`,t);for(const a of n)a.classList.remove(Qe)}static jQueryInterface(t){return this.each(function(){const n=Nn.getOrCreateInstance(this,t);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t]()}})}}y.on(window,il,()=>{for(const i of D.find(sl))Nn.getOrCreateInstance(i)}),vt(Nn);const hl="tab",Ce=".bs.tab",dl=`hide${Ce}`,pl=`hidden${Ce}`,_l=`show${Ce}`,gl=`shown${Ce}`,ml=`click${Ce}`,vl=`keydown${Ce}`,El=`load${Ce}`,yl="ArrowLeft",Ss="ArrowRight",Al="ArrowUp",xs="ArrowDown",ir="Home",Ns="End",Se="active",Is="fade",rr="show",bl="dropdown",Ds=".dropdown-toggle",Tl=".dropdown-menu",sr=`:not(${Ds})`,Ol='.list-group, .nav, [role="tablist"]',wl=".nav-item, .list-group-item",$l=`.nav-link${sr}, .list-group-item${sr}, [role="tab"]${sr}`,Rs='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',or=`${$l}, ${Rs}`,Cl=`.${Se}[data-bs-toggle="tab"], .${Se}[data-bs-toggle="pill"], .${Se}[data-bs-toggle="list"]`;class xe extends Lt{constructor(t){super(t),this._parent=this._element.closest(Ol),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),y.on(this._element,vl,n=>this._keydown(n)))}static get NAME(){return hl}show(){const t=this._element;if(this._elemIsActive(t))return;const n=this._getActiveElem(),a=n?y.trigger(n,dl,{relatedTarget:t}):null;y.trigger(t,_l,{relatedTarget:n}).defaultPrevented||a&&a.defaultPrevented||(this._deactivate(n,t),this._activate(t,n))}_activate(t,n){if(!t)return;t.classList.add(Se),this._activate(D.getElementFromSelector(t));const a=()=>{if(t.getAttribute("role")!=="tab"){t.classList.add(rr);return}t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),y.trigger(t,gl,{relatedTarget:n})};this._queueCallback(a,t,t.classList.contains(Is))}_deactivate(t,n){if(!t)return;t.classList.remove(Se),t.blur(),this._deactivate(D.getElementFromSelector(t));const a=()=>{if(t.getAttribute("role")!=="tab"){t.classList.remove(rr);return}t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),y.trigger(t,pl,{relatedTarget:n})};this._queueCallback(a,t,t.classList.contains(Is))}_keydown(t){if(![yl,Ss,Al,xs,ir,Ns].includes(t.key))return;t.stopPropagation(),t.preventDefault();const n=this._getChildren().filter(u=>!X(u));let a;if([ir,Ns].includes(t.key))a=n[t.key===ir?0:n.length-1];else{const u=[Ss,xs].includes(t.key);a=an(n,t.target,u,!0)}a&&(a.focus({preventScroll:!0}),xe.getOrCreateInstance(a).show())}_getChildren(){return D.find(or,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,n){this._setAttributeIfNotExists(t,"role","tablist");for(const a of n)this._setInitialAttributesOnChild(a)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const n=this._elemIsActive(t),a=this._getOuterElement(t);t.setAttribute("aria-selected",n),a!==t&&this._setAttributeIfNotExists(a,"role","presentation"),n||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const n=D.getElementFromSelector(t);n&&(this._setAttributeIfNotExists(n,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(n,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,n){const a=this._getOuterElement(t);if(!a.classList.contains(bl))return;const u=(_,g)=>{const v=D.findOne(_,a);v&&v.classList.toggle(g,n)};u(Ds,Se),u(Tl,rr),a.setAttribute("aria-expanded",n)}_setAttributeIfNotExists(t,n,a){t.hasAttribute(n)||t.setAttribute(n,a)}_elemIsActive(t){return t.classList.contains(Se)}_getInnerElement(t){return t.matches(or)?t:D.findOne(or,t)}_getOuterElement(t){return t.closest(wl)||t}static jQueryInterface(t){return this.each(function(){const n=xe.getOrCreateInstance(this);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t]()}})}}y.on(document,ml,Rs,function(i){["A","AREA"].includes(this.tagName)&&i.preventDefault(),!X(this)&&xe.getOrCreateInstance(this).show()}),y.on(window,El,()=>{for(const i of D.find(Cl))xe.getOrCreateInstance(i)}),vt(xe);const Sl="toast",de=".bs.toast",xl=`mouseover${de}`,Nl=`mouseout${de}`,Il=`focusin${de}`,Dl=`focusout${de}`,Rl=`hide${de}`,Ll=`hidden${de}`,Pl=`show${de}`,Ml=`shown${de}`,kl="fade",Ls="hide",ni="show",ii="showing",Hl={animation:"boolean",autohide:"boolean",delay:"number"},jl={animation:!0,autohide:!0,delay:5e3};class In extends Lt{constructor(t,n){super(t,n),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return jl}static get DefaultType(){return Hl}static get NAME(){return Sl}show(){if(y.trigger(this._element,Pl).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(kl);const n=()=>{this._element.classList.remove(ii),y.trigger(this._element,Ml),this._maybeScheduleHide()};this._element.classList.remove(Ls),St(this._element),this._element.classList.add(ni,ii),this._queueCallback(n,this._element,this._config.animation)}hide(){if(!this.isShown()||y.trigger(this._element,Rl).defaultPrevented)return;const n=()=>{this._element.classList.add(Ls),this._element.classList.remove(ii,ni),y.trigger(this._element,Ll)};this._element.classList.add(ii),this._queueCallback(n,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(ni),super.dispose()}isShown(){return this._element.classList.contains(ni)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(t,n){switch(t.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=n;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=n;break}}if(n){this._clearTimeout();return}const a=t.relatedTarget;this._element===a||this._element.contains(a)||this._maybeScheduleHide()}_setListeners(){y.on(this._element,xl,t=>this._onInteraction(t,!0)),y.on(this._element,Nl,t=>this._onInteraction(t,!1)),y.on(this._element,Il,t=>this._onInteraction(t,!0)),y.on(this._element,Dl,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){const n=In.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t](this)}})}}return ve(In),vt(In),{Alert:zt,Button:Pt,Carousel:qt,Collapse:Be,Dropdown:Gt,Modal:we,Offcanvas:ae,Popover:ei,ScrollSpy:Nn,Tab:xe,Toast:In,Tooltip:$e}})})(Gl);class Jl{constructor(l,o){rt(this,"init",l=>{this.view.init(l,this.sendMessage)});rt(this,"insertNewMessage",l=>{this.view.insertNewMessage(l)});rt(this,"sendMessage",l=>{this.chat.dialog.notify(this.chat,"sendChatMessage",l)});this.view=l,this.chat=o}}class Xl{constructor(){rt(this,"init",async(l,o)=>{await l.load("../templates/chatTemplate.html"),Ln("#chat-insert").on("click","#send-chat-button",()=>{const f=Ln("#chat-input").val();f!=""&&(o(f==null?"Hola!":f.toString()),Ln("#chat-input").val(""))})});rt(this,"insertNewMessage",l=>{Ln.get("../templates/chatItem.html",function(o){let f=o,p={"{{player_name_place_holder}}":l.player_name,"{{message_placeholder}}":l.message_content};for(let m in p)p.hasOwnProperty(m)&&(f=f.replace(m,p[m]));Ln("#chat-list").append(f)})})}}class Xf extends Xs{constructor(o){super(o);rt(this,"controller");rt(this,"init",o=>{this.controller.init(o)});this.controller=new Jl(new Xl,this)}insertNewMessage(o,f){this.controller.insertNewMessage({player_name:o,message_content:f})}}var Qs={};ArrayBuffer.isView||(ArrayBuffer.isView=h=>h!==null&&typeof h=="object"&&h.buffer instanceof ArrayBuffer);typeof globalThis>"u"&&typeof window<"u"&&(window.globalThis=window);var en={};function Ws(h,l){l.headers=h.headers||{},l.statusMessage=h.statusText,l.statusCode=h.status,l.data=h.response}function Qt(h,l,o){return new Promise(function(f,p){o=o||{};var m=new XMLHttpRequest,b,$,O,C=o.body,w=o.headers||{};o.timeout&&(m.timeout=o.timeout),m.ontimeout=m.onerror=function(I){I.timeout=I.type=="timeout",p(I)},m.open(h,l.href||l),m.onload=function(){for(O=m.getAllResponseHeaders().trim().split(/[\r\n]+/),Ws(m,m);$=O.shift();)$=$.split(": "),m.headers[$.shift().toLowerCase()]=$.join(": ");if($=m.headers["content-type"],$&&~$.indexOf("application/json"))try{m.data=JSON.parse(m.data,o.reviver)}catch(I){return Ws(m,I),p(I)}(m.status>=400?p:f)(m)},typeof FormData<"u"&&C instanceof FormData||C&&typeof C=="object"&&(w["content-type"]="application/json",C=JSON.stringify(C)),m.withCredentials=!!o.withCredentials;for(b in w)m.setRequestHeader(b,w[b]);m.send(C)})}var Ql=Qt.bind(Qt,"GET"),Zl=Qt.bind(Qt,"POST"),tf=Qt.bind(Qt,"PATCH"),ef=Qt.bind(Qt,"DELETE"),nf=Qt.bind(Qt,"PUT");const rf=Object.freeze(Object.defineProperty({__proto__:null,del:ef,get:Ql,patch:tf,post:Zl,put:nf,send:Qt},Symbol.toStringTag,{value:"Module"})),Zs=ql(rf);var pr={};(function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.ServerError=h.CloseCode=void 0,function(o){o[o.CONSENTED=4e3]="CONSENTED",o[o.DEVMODE_RESTART=4010]="DEVMODE_RESTART"}(h.CloseCode||(h.CloseCode={}));class l extends Error{constructor(f,p){super(p),this.name="ServerError",this.code=f}}h.ServerError=l})(pr);var Mn={},nn={};Object.defineProperty(nn,"__esModule",{value:!0});nn.decode=nn.encode=void 0;function sn(h,l){if(this._offset=l,h instanceof ArrayBuffer)this._buffer=h,this._view=new DataView(this._buffer);else if(ArrayBuffer.isView(h))this._buffer=h.buffer,this._view=new DataView(this._buffer,h.byteOffset,h.byteLength);else throw new Error("Invalid argument")}function sf(h,l,o){for(var f="",p=0,m=l,b=l+o;m<b;m++){var $=h.getUint8(m);if(!($&128)){f+=String.fromCharCode($);continue}if(($&224)===192){f+=String.fromCharCode(($&31)<<6|h.getUint8(++m)&63);continue}if(($&240)===224){f+=String.fromCharCode(($&15)<<12|(h.getUint8(++m)&63)<<6|(h.getUint8(++m)&63)<<0);continue}if(($&248)===240){p=($&7)<<18|(h.getUint8(++m)&63)<<12|(h.getUint8(++m)&63)<<6|(h.getUint8(++m)&63)<<0,p>=65536?(p-=65536,f+=String.fromCharCode((p>>>10)+55296,(p&1023)+56320)):f+=String.fromCharCode(p);continue}throw new Error("Invalid byte "+$.toString(16))}return f}sn.prototype._array=function(h){for(var l=new Array(h),o=0;o<h;o++)l[o]=this._parse();return l};sn.prototype._map=function(h){for(var l="",o={},f=0;f<h;f++)l=this._parse(),o[l]=this._parse();return o};sn.prototype._str=function(h){var l=sf(this._view,this._offset,h);return this._offset+=h,l};sn.prototype._bin=function(h){var l=this._buffer.slice(this._offset,this._offset+h);return this._offset+=h,l};sn.prototype._parse=function(){var h=this._view.getUint8(this._offset++),l,o=0,f=0,p=0,m=0;if(h<192)return h<128?h:h<144?this._map(h&15):h<160?this._array(h&15):this._str(h&31);if(h>223)return(255-h+1)*-1;switch(h){case 192:return null;case 194:return!1;case 195:return!0;case 196:return o=this._view.getUint8(this._offset),this._offset+=1,this._bin(o);case 197:return o=this._view.getUint16(this._offset),this._offset+=2,this._bin(o);case 198:return o=this._view.getUint32(this._offset),this._offset+=4,this._bin(o);case 199:if(o=this._view.getUint8(this._offset),f=this._view.getInt8(this._offset+1),this._offset+=2,f===-1){var b=this._view.getUint32(this._offset);return p=this._view.getInt32(this._offset+4),m=this._view.getUint32(this._offset+8),this._offset+=12,new Date((p*4294967296+m)*1e3+b/1e6)}return[f,this._bin(o)];case 200:return o=this._view.getUint16(this._offset),f=this._view.getInt8(this._offset+2),this._offset+=3,[f,this._bin(o)];case 201:return o=this._view.getUint32(this._offset),f=this._view.getInt8(this._offset+4),this._offset+=5,[f,this._bin(o)];case 202:return l=this._view.getFloat32(this._offset),this._offset+=4,l;case 203:return l=this._view.getFloat64(this._offset),this._offset+=8,l;case 204:return l=this._view.getUint8(this._offset),this._offset+=1,l;case 205:return l=this._view.getUint16(this._offset),this._offset+=2,l;case 206:return l=this._view.getUint32(this._offset),this._offset+=4,l;case 207:return p=this._view.getUint32(this._offset)*Math.pow(2,32),m=this._view.getUint32(this._offset+4),this._offset+=8,p+m;case 208:return l=this._view.getInt8(this._offset),this._offset+=1,l;case 209:return l=this._view.getInt16(this._offset),this._offset+=2,l;case 210:return l=this._view.getInt32(this._offset),this._offset+=4,l;case 211:return p=this._view.getInt32(this._offset)*Math.pow(2,32),m=this._view.getUint32(this._offset+4),this._offset+=8,p+m;case 212:if(f=this._view.getInt8(this._offset),this._offset+=1,f===0){this._offset+=1;return}return[f,this._bin(1)];case 213:return f=this._view.getInt8(this._offset),this._offset+=1,[f,this._bin(2)];case 214:return f=this._view.getInt8(this._offset),this._offset+=1,f===-1?(l=this._view.getUint32(this._offset),this._offset+=4,new Date(l*1e3)):[f,this._bin(4)];case 215:if(f=this._view.getInt8(this._offset),this._offset+=1,f===0)return p=this._view.getInt32(this._offset)*Math.pow(2,32),m=this._view.getUint32(this._offset+4),this._offset+=8,new Date(p+m);if(f===-1){p=this._view.getUint32(this._offset),m=this._view.getUint32(this._offset+4),this._offset+=8;var $=(p&3)*4294967296+m;return new Date($*1e3+(p>>>2)/1e6)}return[f,this._bin(8)];case 216:return f=this._view.getInt8(this._offset),this._offset+=1,[f,this._bin(16)];case 217:return o=this._view.getUint8(this._offset),this._offset+=1,this._str(o);case 218:return o=this._view.getUint16(this._offset),this._offset+=2,this._str(o);case 219:return o=this._view.getUint32(this._offset),this._offset+=4,this._str(o);case 220:return o=this._view.getUint16(this._offset),this._offset+=2,this._array(o);case 221:return o=this._view.getUint32(this._offset),this._offset+=4,this._array(o);case 222:return o=this._view.getUint16(this._offset),this._offset+=2,this._map(o);case 223:return o=this._view.getUint32(this._offset),this._offset+=4,this._map(o)}throw new Error("Could not parse")};function of(h,l=0){var o=new sn(h,l),f=o._parse();if(o._offset!==h.byteLength)throw new Error(h.byteLength-o._offset+" trailing bytes");return f}nn.decode=of;var af=4294967296-1,cf=17179869184-1;function lf(h,l,o){for(var f=0,p=0,m=o.length;p<m;p++)f=o.charCodeAt(p),f<128?h.setUint8(l++,f):f<2048?(h.setUint8(l++,192|f>>6),h.setUint8(l++,128|f&63)):f<55296||f>=57344?(h.setUint8(l++,224|f>>12),h.setUint8(l++,128|f>>6&63),h.setUint8(l++,128|f&63)):(p++,f=65536+((f&1023)<<10|o.charCodeAt(p)&1023),h.setUint8(l++,240|f>>18),h.setUint8(l++,128|f>>12&63),h.setUint8(l++,128|f>>6&63),h.setUint8(l++,128|f&63))}function ff(h){for(var l=0,o=0,f=0,p=h.length;f<p;f++)l=h.charCodeAt(f),l<128?o+=1:l<2048?o+=2:l<55296||l>=57344?o+=3:(f++,o+=4);return o}function tn(h,l,o){var f=typeof o,p=0,m=0,b=0,$=0,O=0,C=0;if(f==="string"){if(O=ff(o),O<32)h.push(O|160),C=1;else if(O<256)h.push(217,O),C=2;else if(O<65536)h.push(218,O>>8,O),C=3;else if(O<4294967296)h.push(219,O>>24,O>>16,O>>8,O),C=5;else throw new Error("String too long");return l.push({_str:o,_length:O,_offset:h.length}),C+O}if(f==="number")return Math.floor(o)!==o||!isFinite(o)?(h.push(203),l.push({_float:o,_length:8,_offset:h.length}),9):o>=0?o<128?(h.push(o),1):o<256?(h.push(204,o),2):o<65536?(h.push(205,o>>8,o),3):o<4294967296?(h.push(206,o>>24,o>>16,o>>8,o),5):(b=o/Math.pow(2,32)>>0,$=o>>>0,h.push(207,b>>24,b>>16,b>>8,b,$>>24,$>>16,$>>8,$),9):o>=-32?(h.push(o),1):o>=-128?(h.push(208,o),2):o>=-32768?(h.push(209,o>>8,o),3):o>=-2147483648?(h.push(210,o>>24,o>>16,o>>8,o),5):(b=Math.floor(o/Math.pow(2,32)),$=o>>>0,h.push(211,b>>24,b>>16,b>>8,b,$>>24,$>>16,$>>8,$),9);if(f==="object"){if(o===null)return h.push(192),1;if(Array.isArray(o)){if(O=o.length,O<16)h.push(O|144),C=1;else if(O<65536)h.push(220,O>>8,O),C=3;else if(O<4294967296)h.push(221,O>>24,O>>16,O>>8,O),C=5;else throw new Error("Array too large");for(p=0;p<O;p++)C+=tn(h,l,o[p]);return C}if(o instanceof Date){var w=o.getTime(),I=Math.floor(w/1e3),k=(w-I*1e3)*1e6;return I>=0&&k>=0&&I<=cf?k===0&&I<=af?(h.push(214,255,I>>24,I>>16,I>>8,I),6):(b=I/4294967296,$=I&4294967295,h.push(215,255,k>>22,k>>14,k>>6,b,$>>24,$>>16,$>>8,$),10):(b=Math.floor(I/4294967296),$=I>>>0,h.push(199,12,255,k>>24,k>>16,k>>8,k,b>>24,b>>16,b>>8,b,$>>24,$>>16,$>>8,$),15)}if(o instanceof ArrayBuffer){if(O=o.byteLength,O<256)h.push(196,O),C=2;else if(O<65536)h.push(197,O>>8,O),C=3;else if(O<4294967296)h.push(198,O>>24,O>>16,O>>8,O),C=5;else throw new Error("Buffer too large");return l.push({_bin:o,_length:O,_offset:h.length}),C+O}if(typeof o.toJSON=="function")return tn(h,l,o.toJSON());var Q=[],et="",X=Object.keys(o);for(p=0,m=X.length;p<m;p++)et=X[p],o[et]!==void 0&&typeof o[et]!="function"&&Q.push(et);if(O=Q.length,O<16)h.push(O|128),C=1;else if(O<65536)h.push(222,O>>8,O),C=3;else if(O<4294967296)h.push(223,O>>24,O>>16,O>>8,O),C=5;else throw new Error("Object too large");for(p=0;p<O;p++)et=Q[p],C+=tn(h,l,et),C+=tn(h,l,o[et]);return C}if(f==="boolean")return h.push(o?195:194),1;if(f==="undefined")return h.push(192),1;if(typeof o.toJSON=="function")return tn(h,l,o.toJSON());throw new Error("Could not encode")}function uf(h){var l=[],o=[],f=tn(l,o,h),p=new ArrayBuffer(f),m=new DataView(p),b=0,$=0,O=-1;o.length>0&&(O=o[0]._offset);for(var C,w=0,I=0,k=0,Q=l.length;k<Q;k++)if(m.setUint8($+k,l[k]),k+1===O){if(C=o[b],w=C._length,I=$+O,C._bin)for(var et=new Uint8Array(C._bin),X=0;X<w;X++)m.setUint8(I+X,et[X]);else C._str?lf(m,I,C._str):C._float!==void 0&&m.setFloat64(I,C._float);b++,$+=w,o[b]&&(O=o[b]._offset)}return p}nn.encode=uf;var fi={},ui={},hf=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")},df=pt&&pt.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(ui,"__esModule",{value:!0});ui.WebSocketTransport=void 0;const pf=df(hf),zs=globalThis.WebSocket||pf.default;class _f{constructor(l){this.events=l}send(l){l instanceof ArrayBuffer?this.ws.send(l):Array.isArray(l)&&this.ws.send(new Uint8Array(l).buffer)}connect(l){this.ws=new zs(l,this.protocols),this.ws.binaryType="arraybuffer",this.ws.onopen=this.events.onopen,this.ws.onmessage=this.events.onmessage,this.ws.onclose=this.events.onclose,this.ws.onerror=this.events.onerror}close(l,o){this.ws.close(l,o)}get isOpen(){return this.ws.readyState===zs.OPEN}}ui.WebSocketTransport=_f;Object.defineProperty(fi,"__esModule",{value:!0});fi.Connection=void 0;const gf=ui;class mf{constructor(){this.events={},this.transport=new gf.WebSocketTransport(this.events)}send(l){this.transport.send(l)}connect(l){this.transport.connect(l)}close(l,o){this.transport.close(l,o)}get isOpen(){return this.transport.isOpen}}fi.Connection=mf;var _r={};(function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.utf8Length=h.utf8Read=h.ErrorCode=h.Protocol=void 0,function(f){f[f.HANDSHAKE=9]="HANDSHAKE",f[f.JOIN_ROOM=10]="JOIN_ROOM",f[f.ERROR=11]="ERROR",f[f.LEAVE_ROOM=12]="LEAVE_ROOM",f[f.ROOM_DATA=13]="ROOM_DATA",f[f.ROOM_STATE=14]="ROOM_STATE",f[f.ROOM_STATE_PATCH=15]="ROOM_STATE_PATCH",f[f.ROOM_DATA_SCHEMA=16]="ROOM_DATA_SCHEMA",f[f.ROOM_DATA_BYTES=17]="ROOM_DATA_BYTES"}(h.Protocol||(h.Protocol={})),function(f){f[f.MATCHMAKE_NO_HANDLER=4210]="MATCHMAKE_NO_HANDLER",f[f.MATCHMAKE_INVALID_CRITERIA=4211]="MATCHMAKE_INVALID_CRITERIA",f[f.MATCHMAKE_INVALID_ROOM_ID=4212]="MATCHMAKE_INVALID_ROOM_ID",f[f.MATCHMAKE_UNHANDLED=4213]="MATCHMAKE_UNHANDLED",f[f.MATCHMAKE_EXPIRED=4214]="MATCHMAKE_EXPIRED",f[f.AUTH_FAILED=4215]="AUTH_FAILED",f[f.APPLICATION_ERROR=4216]="APPLICATION_ERROR"}(h.ErrorCode||(h.ErrorCode={}));function l(f,p){const m=f[p++];for(var b="",$=0,O=p,C=p+m;O<C;O++){var w=f[O];if(!(w&128)){b+=String.fromCharCode(w);continue}if((w&224)===192){b+=String.fromCharCode((w&31)<<6|f[++O]&63);continue}if((w&240)===224){b+=String.fromCharCode((w&15)<<12|(f[++O]&63)<<6|(f[++O]&63)<<0);continue}if((w&248)===240){$=(w&7)<<18|(f[++O]&63)<<12|(f[++O]&63)<<6|(f[++O]&63)<<0,$>=65536?($-=65536,b+=String.fromCharCode(($>>>10)+55296,($&1023)+56320)):b+=String.fromCharCode($);continue}throw new Error("Invalid byte "+w.toString(16))}return b}h.utf8Read=l;function o(f=""){let p=0,m=0;for(let b=0,$=f.length;b<$;b++)p=f.charCodeAt(b),p<128?m+=1:p<2048?m+=2:p<55296||p>=57344?m+=3:(b++,m+=4);return m+1}h.utf8Length=o})(_r);var Pe={};Object.defineProperty(Pe,"__esModule",{value:!0});Pe.getSerializer=Pe.registerSerializer=void 0;const to={};function vf(h,l){to[h]=l}Pe.registerSerializer=vf;function Ef(h){const l=to[h];if(!l)throw new Error("missing serializer: "+h);return l}Pe.getSerializer=Ef;var hi={};Object.defineProperty(hi,"__esModule",{value:!0});hi.createNanoEvents=void 0;const yf=()=>({emit(h,...l){let o=this.events[h]||[];for(let f=0,p=o.length;f<p;f++)o[f](...l)},events:{},on(h,l){var o;return!((o=this.events[h])===null||o===void 0)&&o.push(l)||(this.events[h]=[l]),()=>{var f;this.events[h]=(f=this.events[h])===null||f===void 0?void 0:f.filter(p=>l!==p)}}});hi.createNanoEvents=yf;var rn={};Object.defineProperty(rn,"__esModule",{value:!0});rn.createSignal=rn.EventEmitter=void 0;class eo{constructor(){this.handlers=[]}register(l,o=!1){return this.handlers.push(l),this}invoke(...l){this.handlers.forEach(o=>o.apply(this,l))}invokeAsync(...l){return Promise.all(this.handlers.map(o=>o.apply(this,l)))}remove(l){const o=this.handlers.indexOf(l);this.handlers[o]=this.handlers[this.handlers.length-1],this.handlers.pop()}clear(){this.handlers=[]}}rn.EventEmitter=eo;function Af(){const h=new eo;function l(o){return h.register(o,this===null)}return l.once=o=>{const f=function(...p){o.apply(this,p),h.remove(f)};h.register(f)},l.remove=o=>h.remove(o),l.invoke=(...o)=>h.invoke(...o),l.invokeAsync=(...o)=>h.invokeAsync(...o),l.clear=()=>h.clear(),l}rn.createSignal=Af;var dr={exports:{}};(function(h,l){(function(o,f){f(l)})(pt,function(o){var f=function(r,e){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(s[d]=c[d])},f(r,e)};function p(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");f(r,e);function s(){this.constructor=r}r.prototype=e===null?Object.create(e):(s.prototype=e.prototype,new s)}function m(r,e,s,c){var d=arguments.length,E=d<3?e:c===null?c=Object.getOwnPropertyDescriptor(e,s):c,S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(r,e,s,c);else for(var L=r.length-1;L>=0;L--)(S=r[L])&&(E=(d<3?S(E):d>3?S(e,s,E):S(e,s))||E);return d>3&&E&&Object.defineProperty(e,s,E),E}function b(r,e,s){if(s||arguments.length===2)for(var c=0,d=e.length,E;c<d;c++)(E||!(c in e))&&(E||(E=Array.prototype.slice.call(e,0,c)),E[c]=e[c]);return r.concat(E||Array.prototype.slice.call(e))}var $=255,O=213;o.OPERATION=void 0,function(r){r[r.ADD=128]="ADD",r[r.REPLACE=0]="REPLACE",r[r.DELETE=64]="DELETE",r[r.DELETE_AND_ADD=192]="DELETE_AND_ADD",r[r.TOUCH=1]="TOUCH",r[r.CLEAR=10]="CLEAR"}(o.OPERATION||(o.OPERATION={}));var C=function(){function r(e,s,c){this.changed=!1,this.changes=new Map,this.allChanges=new Set,this.caches={},this.currentCustomOperation=0,this.ref=e,this.setParent(s,c)}return r.prototype.setParent=function(e,s,c){var d=this;if(this.indexes||(this.indexes=this.ref instanceof At?this.ref._definition.indexes:{}),this.parent=e,this.parentIndex=c,!!s)if(this.root=s,this.ref instanceof At){var E=this.ref._definition;for(var S in E.schema){var L=this.ref[S];if(L&&L.$changes){var z=E.indexes[S];L.$changes.setParent(this.ref,s,z)}}}else typeof this.ref=="object"&&this.ref.forEach(function(V,R){if(V instanceof At){var K=V.$changes,P=d.ref.$changes.indexes[R];K.setParent(d.ref,d.root,P)}})},r.prototype.operation=function(e){this.changes.set(--this.currentCustomOperation,e)},r.prototype.change=function(e,s){s===void 0&&(s=o.OPERATION.ADD);var c=typeof e=="number"?e:this.indexes[e];this.assertValidIndex(c,e);var d=this.changes.get(c);(!d||d.op===o.OPERATION.DELETE||d.op===o.OPERATION.TOUCH)&&this.changes.set(c,{op:d&&d.op===o.OPERATION.DELETE?o.OPERATION.DELETE_AND_ADD:s,index:c}),this.allChanges.add(c),this.changed=!0,this.touchParents()},r.prototype.touch=function(e){var s=typeof e=="number"?e:this.indexes[e];this.assertValidIndex(s,e),this.changes.has(s)||this.changes.set(s,{op:o.OPERATION.TOUCH,index:s}),this.allChanges.add(s),this.touchParents()},r.prototype.touchParents=function(){this.parent&&this.parent.$changes.touch(this.parentIndex)},r.prototype.getType=function(e){if(this.ref._definition){var s=this.ref._definition;return s.schema[s.fieldsByIndex[e]]}else{var s=this.parent._definition,c=s.schema[s.fieldsByIndex[this.parentIndex]];return Object.values(c)[0]}},r.prototype.getChildrenFilter=function(){var e=this.parent._definition.childFilters;return e&&e[this.parentIndex]},r.prototype.getValue=function(e){return this.ref.getByIndex(e)},r.prototype.delete=function(e){var s=typeof e=="number"?e:this.indexes[e];if(s===void 0){console.warn("@colyseus/schema ".concat(this.ref.constructor.name,": trying to delete non-existing index: ").concat(e," (").concat(s,")"));return}var c=this.getValue(s);this.changes.set(s,{op:o.OPERATION.DELETE,index:s}),this.allChanges.delete(s),delete this.caches[s],c&&c.$changes&&(c.$changes.parent=void 0),this.changed=!0,this.touchParents()},r.prototype.discard=function(e,s){var c=this;e===void 0&&(e=!1),s===void 0&&(s=!1),this.ref instanceof At||this.changes.forEach(function(d){if(d.op===o.OPERATION.DELETE){var E=c.ref.getIndex(d.index);delete c.indexes[E]}}),this.changes.clear(),this.changed=e,s&&this.allChanges.clear(),this.currentCustomOperation=0},r.prototype.discardAll=function(){var e=this;this.changes.forEach(function(s){var c=e.getValue(s.index);c&&c.$changes&&c.$changes.discardAll()}),this.discard()},r.prototype.cache=function(e,s){this.caches[e]=s},r.prototype.clone=function(){return new r(this.ref,this.parent,this.root)},r.prototype.ensureRefId=function(){this.refId===void 0&&(this.refId=this.root.getNextUniqueId())},r.prototype.assertValidIndex=function(e,s){if(e===void 0)throw new Error('ChangeTree: missing index for field "'.concat(s,'"'))},r}();function w(r,e,s,c){return r[e]||(r[e]=[]),r[e].push(s),c==null||c.forEach(function(d,E){return s(d,E)}),function(){return k(r[e],r[e].indexOf(s))}}function I(r){var e=this,s=typeof this.$changes.getType()!="string";this.$items.forEach(function(c,d){r.push({refId:e.$changes.refId,op:o.OPERATION.DELETE,field:d,value:void 0,previousValue:c}),s&&e.$changes.root.removeRef(c.$changes.refId)})}function k(r,e){if(e===-1||e>=r.length)return!1;for(var s=r.length-1,c=e;c<s;c++)r[c]=r[c+1];return r.length=s,!0}var Q=function(r,e){var s=r.toString(),c=e.toString();return s<c?-1:s>c?1:0};function et(r){return r.$proxy=!0,r=new Proxy(r,{get:function(e,s){return typeof s!="symbol"&&!isNaN(s)?e.at(s):e[s]},set:function(e,s,c){if(typeof s!="symbol"&&!isNaN(s)){var d=Array.from(e.$items.keys()),E=parseInt(d[s]||s);c==null?e.deleteAt(E):e.setAt(E,c)}else e[s]=c;return!0},deleteProperty:function(e,s){return typeof s=="number"?e.deleteAt(s):delete e[s],!0}}),r}var X=function(){function r(){for(var e=[],s=0;s<arguments.length;s++)e[s]=arguments[s];this.$changes=new C(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,this.push.apply(this,e)}return r.prototype.onAdd=function(e,s){return s===void 0&&(s=!0),w(this.$callbacks||(this.$callbacks=[]),o.OPERATION.ADD,e,s?this.$items:void 0)},r.prototype.onRemove=function(e){return w(this.$callbacks||(this.$callbacks=[]),o.OPERATION.DELETE,e)},r.prototype.onChange=function(e){return w(this.$callbacks||(this.$callbacks=[]),o.OPERATION.REPLACE,e)},r.is=function(e){return Array.isArray(e)||e.array!==void 0},Object.defineProperty(r.prototype,"length",{get:function(){return this.$items.size},set:function(e){e===0?this.clear():this.splice(e,this.length-e)},enumerable:!1,configurable:!0}),r.prototype.push=function(){for(var e=this,s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];var d;return s.forEach(function(E){d=e.$refId++,e.setAt(d,E)}),d},r.prototype.pop=function(){var e=Array.from(this.$indexes.values()).pop();if(e!==void 0){this.$changes.delete(e),this.$indexes.delete(e);var s=this.$items.get(e);return this.$items.delete(e),s}},r.prototype.at=function(e){var s=Array.from(this.$items.keys())[e];return this.$items.get(s)},r.prototype.setAt=function(e,s){var c,d;if(s==null){console.error("ArraySchema items cannot be null nor undefined; Use `deleteAt(index)` instead.");return}if(this.$items.get(e)!==s){s.$changes!==void 0&&s.$changes.setParent(this,this.$changes.root,e);var E=(d=(c=this.$changes.indexes[e])===null||c===void 0?void 0:c.op)!==null&&d!==void 0?d:o.OPERATION.ADD;this.$changes.indexes[e]=e,this.$indexes.set(e,e),this.$items.set(e,s),this.$changes.change(e,E)}},r.prototype.deleteAt=function(e){var s=Array.from(this.$items.keys())[e];return s===void 0?!1:this.$deleteAt(s)},r.prototype.$deleteAt=function(e){return this.$changes.delete(e),this.$indexes.delete(e),this.$items.delete(e)},r.prototype.clear=function(e){this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),e&&I.call(this,e),this.$items.clear(),this.$changes.operation({index:0,op:o.OPERATION.CLEAR}),this.$changes.touchParents()},r.prototype.concat=function(){for(var e,s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];return new(r.bind.apply(r,b([void 0],(e=Array.from(this.$items.values())).concat.apply(e,s),!1)))},r.prototype.join=function(e){return Array.from(this.$items.values()).join(e)},r.prototype.reverse=function(){var e=this,s=Array.from(this.$items.keys()),c=Array.from(this.$items.values()).reverse();return c.forEach(function(d,E){e.setAt(s[E],d)}),this},r.prototype.shift=function(){var e=Array.from(this.$items.keys()),s=e.shift();if(s!==void 0){var c=this.$items.get(s);return this.$deleteAt(s),c}},r.prototype.slice=function(e,s){var c=new r;return c.push.apply(c,Array.from(this.$items.values()).slice(e,s)),c},r.prototype.sort=function(e){var s=this;e===void 0&&(e=Q);var c=Array.from(this.$items.keys()),d=Array.from(this.$items.values()).sort(e);return d.forEach(function(E,S){s.setAt(c[S],E)}),this},r.prototype.splice=function(e,s){s===void 0&&(s=this.length-e);for(var c=Array.from(this.$items.keys()),d=[],E=e;E<e+s;E++)d.push(this.$items.get(c[E])),this.$deleteAt(c[E]);return d},r.prototype.unshift=function(){for(var e=this,s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];var d=this.length,E=s.length,S=Array.from(this.$items.values());return s.forEach(function(L,z){e.setAt(z,L)}),S.forEach(function(L,z){e.setAt(E+z,L)}),d+E},r.prototype.indexOf=function(e,s){return Array.from(this.$items.values()).indexOf(e,s)},r.prototype.lastIndexOf=function(e,s){return s===void 0&&(s=this.length-1),Array.from(this.$items.values()).lastIndexOf(e,s)},r.prototype.every=function(e,s){return Array.from(this.$items.values()).every(e,s)},r.prototype.some=function(e,s){return Array.from(this.$items.values()).some(e,s)},r.prototype.forEach=function(e,s){Array.from(this.$items.values()).forEach(e,s)},r.prototype.map=function(e,s){return Array.from(this.$items.values()).map(e,s)},r.prototype.filter=function(e,s){return Array.from(this.$items.values()).filter(e,s)},r.prototype.reduce=function(e,s){return Array.prototype.reduce.apply(Array.from(this.$items.values()),arguments)},r.prototype.reduceRight=function(e,s){return Array.prototype.reduceRight.apply(Array.from(this.$items.values()),arguments)},r.prototype.find=function(e,s){return Array.from(this.$items.values()).find(e,s)},r.prototype.findIndex=function(e,s){return Array.from(this.$items.values()).findIndex(e,s)},r.prototype.fill=function(e,s,c){throw new Error("ArraySchema#fill() not implemented")},r.prototype.copyWithin=function(e,s,c){throw new Error("ArraySchema#copyWithin() not implemented")},r.prototype.toString=function(){return this.$items.toString()},r.prototype.toLocaleString=function(){return this.$items.toLocaleString()},r.prototype[Symbol.iterator]=function(){return Array.from(this.$items.values())[Symbol.iterator]()},Object.defineProperty(r,Symbol.species,{get:function(){return r},enumerable:!1,configurable:!0}),r.prototype.entries=function(){return this.$items.entries()},r.prototype.keys=function(){return this.$items.keys()},r.prototype.values=function(){return this.$items.values()},r.prototype.includes=function(e,s){return Array.from(this.$items.values()).includes(e,s)},r.prototype.flatMap=function(e,s){throw new Error("ArraySchema#flatMap() is not supported.")},r.prototype.flat=function(e){throw new Error("ArraySchema#flat() is not supported.")},r.prototype.findLast=function(){var e=Array.from(this.$items.values());return e.findLast.apply(e,arguments)},r.prototype.findLastIndex=function(){var e=Array.from(this.$items.values());return e.findLastIndex.apply(e,arguments)},r.prototype.setIndex=function(e,s){this.$indexes.set(e,s)},r.prototype.getIndex=function(e){return this.$indexes.get(e)},r.prototype.getByIndex=function(e){return this.$items.get(this.$indexes.get(e))},r.prototype.deleteByIndex=function(e){var s=this.$indexes.get(e);this.$items.delete(s),this.$indexes.delete(e)},r.prototype.toArray=function(){return Array.from(this.$items.values())},r.prototype.toJSON=function(){return this.toArray().map(function(e){return typeof e.toJSON=="function"?e.toJSON():e})},r.prototype.clone=function(e){var s;return e?s=new(r.bind.apply(r,b([void 0],Array.from(this.$items.values()),!1))):s=new(r.bind.apply(r,b([void 0],this.map(function(c){return c.$changes?c.clone():c}),!1))),s},r}();function ce(r){return r.$proxy=!0,r=new Proxy(r,{get:function(e,s){return typeof s!="symbol"&&typeof e[s]>"u"?e.get(s):e[s]},set:function(e,s,c){return typeof s!="symbol"&&s.indexOf("$")===-1&&s!=="onAdd"&&s!=="onRemove"&&s!=="onChange"?e.set(s,c):e[s]=c,!0},deleteProperty:function(e,s){return e.delete(s),!0}}),r}var ut=function(){function r(e){var s=this;if(this.$changes=new C(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,e)if(e instanceof Map||e instanceof r)e.forEach(function(d,E){return s.set(E,d)});else for(var c in e)this.set(c,e[c])}return r.prototype.onAdd=function(e,s){return s===void 0&&(s=!0),w(this.$callbacks||(this.$callbacks=[]),o.OPERATION.ADD,e,s?this.$items:void 0)},r.prototype.onRemove=function(e){return w(this.$callbacks||(this.$callbacks=[]),o.OPERATION.DELETE,e)},r.prototype.onChange=function(e){return w(this.$callbacks||(this.$callbacks=[]),o.OPERATION.REPLACE,e)},r.is=function(e){return e.map!==void 0},r.prototype[Symbol.iterator]=function(){return this.$items[Symbol.iterator]()},Object.defineProperty(r.prototype,Symbol.toStringTag,{get:function(){return this.$items[Symbol.toStringTag]},enumerable:!1,configurable:!0}),Object.defineProperty(r,Symbol.species,{get:function(){return r},enumerable:!1,configurable:!0}),r.prototype.set=function(e,s){if(s==null)throw new Error("MapSchema#set('".concat(e,"', ").concat(s,"): trying to set ").concat(s," value on '").concat(e,"'."));e=e.toString();var c=typeof this.$changes.indexes[e]<"u",d=c?this.$changes.indexes[e]:this.$refId++,E=c?o.OPERATION.REPLACE:o.OPERATION.ADD,S=s.$changes!==void 0;if(S&&s.$changes.setParent(this,this.$changes.root,d),!c)this.$changes.indexes[e]=d,this.$indexes.set(d,e);else{if(!S&&this.$items.get(e)===s)return;S&&this.$items.get(e)!==s&&(E=o.OPERATION.ADD)}return this.$items.set(e,s),this.$changes.change(e,E),this},r.prototype.get=function(e){return this.$items.get(e)},r.prototype.delete=function(e){return this.$changes.delete(e),this.$items.delete(e)},r.prototype.clear=function(e){this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),e&&I.call(this,e),this.$items.clear(),this.$changes.operation({index:0,op:o.OPERATION.CLEAR}),this.$changes.touchParents()},r.prototype.has=function(e){return this.$items.has(e)},r.prototype.forEach=function(e){this.$items.forEach(e)},r.prototype.entries=function(){return this.$items.entries()},r.prototype.keys=function(){return this.$items.keys()},r.prototype.values=function(){return this.$items.values()},Object.defineProperty(r.prototype,"size",{get:function(){return this.$items.size},enumerable:!1,configurable:!0}),r.prototype.setIndex=function(e,s){this.$indexes.set(e,s)},r.prototype.getIndex=function(e){return this.$indexes.get(e)},r.prototype.getByIndex=function(e){return this.$items.get(this.$indexes.get(e))},r.prototype.deleteByIndex=function(e){var s=this.$indexes.get(e);this.$items.delete(s),this.$indexes.delete(e)},r.prototype.toJSON=function(){var e={};return this.forEach(function(s,c){e[c]=typeof s.toJSON=="function"?s.toJSON():s}),e},r.prototype.clone=function(e){var s;return e?s=Object.assign(new r,this):(s=new r,this.forEach(function(c,d){c.$changes?s.set(d,c.clone()):s.set(d,c)})),s},r}(),St={};function Ot(r,e){St[r]=e}function Ft(r){return St[r]}var on=function(){function r(){this.indexes={},this.fieldsByIndex={},this.deprecated={},this.descriptors={}}return r.create=function(e){var s=new r;return s.schema=Object.assign({},e&&e.schema||{}),s.indexes=Object.assign({},e&&e.indexes||{}),s.fieldsByIndex=Object.assign({},e&&e.fieldsByIndex||{}),s.descriptors=Object.assign({},e&&e.descriptors||{}),s.deprecated=Object.assign({},e&&e.deprecated||{}),s},r.prototype.addField=function(e,s){var c=this.getNextFieldIndex();this.fieldsByIndex[c]=e,this.indexes[e]=c,this.schema[e]=Array.isArray(s)?{array:s[0]}:s},r.prototype.hasField=function(e){return this.indexes[e]!==void 0},r.prototype.addFilter=function(e,s){return this.filters||(this.filters={},this.indexesWithFilters=[]),this.filters[this.indexes[e]]=s,this.indexesWithFilters.push(this.indexes[e]),!0},r.prototype.addChildrenFilter=function(e,s){var c=this.indexes[e],d=this.schema[e];if(Ft(Object.keys(d)[0]))return this.childFilters||(this.childFilters={}),this.childFilters[c]=s,!0;console.warn("@filterChildren: field '".concat(e,"' can't have children. Ignoring filter."))},r.prototype.getChildrenFilter=function(e){return this.childFilters&&this.childFilters[this.indexes[e]]},r.prototype.getNextFieldIndex=function(){return Object.keys(this.schema||{}).length},r}();function Dt(r){return r._context&&r._context.useFilters}var vt=function(){function r(){this.types={},this.schemas=new Map,this.useFilters=!1}return r.prototype.has=function(e){return this.schemas.has(e)},r.prototype.get=function(e){return this.types[e]},r.prototype.add=function(e,s){s===void 0&&(s=this.schemas.size),e._definition=on.create(e._definition),e._typeid=s,this.types[s]=e,this.schemas.set(e,s)},r.create=function(e){return e===void 0&&(e={}),function(s){return e.context||(e.context=new r),wt(s,e)}},r}(),Et=new vt;function wt(r,e){return e===void 0&&(e={}),function(s,c){var d=e.context||Et,E=s.constructor;if(E._context=d,!r)throw new Error("".concat(E.name,': @type() reference provided for "').concat(c,`" is undefined. Make sure you don't have any circular dependencies.`));d.has(E)||d.add(E);var S=E._definition;if(S.addField(c,r),S.descriptors[c]){if(S.deprecated[c])return;try{throw new Error("@colyseus/schema: Duplicate '".concat(c,"' definition on '").concat(E.name,`'.
Check @type() annotation`))}catch(P){var L=P.stack.split(`
`)[4].trim();throw new Error("".concat(P.message," ").concat(L))}}var z=X.is(r),V=!z&&ut.is(r);if(typeof r!="string"&&!At.is(r)){var R=Object.values(r)[0];typeof R!="string"&&!d.has(R)&&d.add(R)}if(e.manual){S.descriptors[c]={enumerable:!0,configurable:!0,writable:!0};return}var K="_".concat(c);S.descriptors[K]={enumerable:!1,configurable:!1,writable:!0},S.descriptors[c]={get:function(){return this[K]},set:function(P){P!==this[K]&&(P!=null?(z&&!(P instanceof X)&&(P=new(X.bind.apply(X,b([void 0],P,!1)))),V&&!(P instanceof ut)&&(P=new ut(P)),P.$proxy===void 0&&(V?P=ce(P):z&&(P=et(P))),this.$changes.change(c),P.$changes&&P.$changes.setParent(this,this.$changes.root,this._definition.indexes[c])):this[K]&&this.$changes.delete(c),this[K]=P)},enumerable:!0,configurable:!0}}}function an(r){return function(e,s){var c=e.constructor,d=c._definition;d.addFilter(s,r)&&(c._context.useFilters=!0)}}function gi(r){return function(e,s){var c=e.constructor,d=c._definition;d.addChildrenFilter(s,r)&&(c._context.useFilters=!0)}}function mi(r){return r===void 0&&(r=!0),function(e,s){var c=e.constructor,d=c._definition;d.deprecated[s]=!0,r&&(d.descriptors[s]={get:function(){throw new Error("".concat(s," is deprecated."))},set:function(E){},enumerable:!1,configurable:!0})}}function vi(r,e,s){s===void 0&&(s={}),s.context||(s.context=r._context||s.context||Et);for(var c in e)wt(e[c],s)(r.prototype,c);return r}function cn(r){for(var e=0,s=0,c=0,d=r.length;c<d;c++)e=r.charCodeAt(c),e<128?s+=1:e<2048?s+=2:e<55296||e>=57344?s+=3:(c++,s+=4);return s}function ln(r,e,s){for(var c=0,d=0,E=s.length;d<E;d++)c=s.charCodeAt(d),c<128?r[e++]=c:c<2048?(r[e++]=192|c>>6,r[e++]=128|c&63):c<55296||c>=57344?(r[e++]=224|c>>12,r[e++]=128|c>>6&63,r[e++]=128|c&63):(d++,c=65536+((c&1023)<<10|s.charCodeAt(d)&1023),r[e++]=240|c>>18,r[e++]=128|c>>12&63,r[e++]=128|c>>6&63,r[e++]=128|c&63)}function fn(r,e){r.push(e&255)}function yt(r,e){r.push(e&255)}function un(r,e){r.push(e&255),r.push(e>>8&255)}function Me(r,e){r.push(e&255),r.push(e>>8&255)}function ge(r,e){r.push(e&255),r.push(e>>8&255),r.push(e>>16&255),r.push(e>>24&255)}function ie(r,e){var s=e>>24,c=e>>16,d=e>>8,E=e;r.push(E&255),r.push(d&255),r.push(c&255),r.push(s&255)}function hn(r,e){var s=Math.floor(e/Math.pow(2,32)),c=e>>>0;ie(r,c),ie(r,s)}function dn(r,e){var s=e/Math.pow(2,32)>>0,c=e>>>0;ie(r,c),ie(r,s)}function kn(r,e){ke(r,e)}function pn(r,e){He(r,e)}var me=new Int32Array(2),Hn=new Float32Array(me.buffer),y=new Float64Array(me.buffer);function ke(r,e){Hn[0]=e,ge(r,me[0])}function He(r,e){y[0]=e,ge(r,me[0]),ge(r,me[1])}function _n(r,e){return yt(r,e?1:0)}function Rt(r,e){e||(e="");var s=cn(e),c=0;if(s<32)r.push(s|160),c=1;else if(s<256)r.push(217),yt(r,s),c=2;else if(s<65536)r.push(218),Me(r,s),c=3;else if(s<4294967296)r.push(219),ie(r,s),c=5;else throw new Error("String too long");return ln(r,r.length,e),c+s}function ht(r,e){if(isNaN(e))return ht(r,0);if(isFinite(e)){if(e!==(e|0))return r.push(203),He(r,e),9}else return ht(r,e>0?Number.MAX_SAFE_INTEGER:-Number.MAX_SAFE_INTEGER);return e>=0?e<128?(yt(r,e),1):e<256?(r.push(204),yt(r,e),2):e<65536?(r.push(205),Me(r,e),3):e<4294967296?(r.push(206),ie(r,e),5):(r.push(207),dn(r,e),9):e>=-32?(r.push(224|e+32),1):e>=-128?(r.push(208),fn(r,e),2):e>=-32768?(r.push(209),un(r,e),3):e>=-2147483648?(r.push(210),ge(r,e),5):(r.push(211),hn(r,e),9)}var gn=Object.freeze({__proto__:null,utf8Write:ln,int8:fn,uint8:yt,int16:un,uint16:Me,int32:ge,uint32:ie,int64:hn,uint64:dn,float32:kn,float64:pn,writeFloat32:ke,writeFloat64:He,boolean:_n,string:Rt,number:ht});function Lt(r,e,s){for(var c="",d=0,E=e,S=e+s;E<S;E++){var L=r[E];if(!(L&128)){c+=String.fromCharCode(L);continue}if((L&224)===192){c+=String.fromCharCode((L&31)<<6|r[++E]&63);continue}if((L&240)===224){c+=String.fromCharCode((L&15)<<12|(r[++E]&63)<<6|(r[++E]&63)<<0);continue}if((L&248)===240){d=(L&7)<<18|(r[++E]&63)<<12|(r[++E]&63)<<6|(r[++E]&63)<<0,d>=65536?(d-=65536,c+=String.fromCharCode((d>>>10)+55296,(d&1023)+56320)):c+=String.fromCharCode(d);continue}console.error("Invalid byte "+L.toString(16))}return c}function je(r,e){return D(r,e)<<24>>24}function D(r,e){return r[e.offset++]}function ve(r,e){return Ve(r,e)<<16>>16}function Ve(r,e){return r[e.offset++]|r[e.offset++]<<8}function le(r,e){return r[e.offset++]|r[e.offset++]<<8|r[e.offset++]<<16|r[e.offset++]<<24}function re(r,e){return le(r,e)>>>0}function Ei(r,e){return mn(r,e)}function yi(r,e){return vn(r,e)}function jn(r,e){var s=re(r,e),c=le(r,e)*Math.pow(2,32);return c+s}function Vn(r,e){var s=re(r,e),c=re(r,e)*Math.pow(2,32);return c+s}var zt=new Int32Array(2),Ai=new Float32Array(zt.buffer),vr=new Float64Array(zt.buffer);function mn(r,e){return zt[0]=le(r,e),Ai[0]}function vn(r,e){return zt[0]=le(r,e),zt[1]=le(r,e),vr[0]}function bi(r,e){return D(r,e)>0}function En(r,e){var s=r[e.offset++],c;s<192?c=s&31:s===217?c=D(r,e):s===218?c=Ve(r,e):s===219&&(c=re(r,e));var d=Lt(r,e.offset,c);return e.offset+=c,d}function Ti(r,e){var s=r[e.offset];return s<192&&s>160||s===217||s===218||s===219}function Pt(r,e){var s=r[e.offset++];if(s<128)return s;if(s===202)return mn(r,e);if(s===203)return vn(r,e);if(s===204)return D(r,e);if(s===205)return Ve(r,e);if(s===206)return re(r,e);if(s===207)return Vn(r,e);if(s===208)return je(r,e);if(s===209)return ve(r,e);if(s===210)return le(r,e);if(s===211)return jn(r,e);if(s>223)return(255-s+1)*-1}function Oi(r,e){var s=r[e.offset];return s<128||s>=202&&s<=211}function fe(r,e){return r[e.offset]<160}function Fn(r,e){return r[e.offset-1]===$&&(r[e.offset]<128||r[e.offset]>=202&&r[e.offset]<=211)}var Un=Object.freeze({__proto__:null,int8:je,uint8:D,int16:ve,uint16:Ve,int32:le,uint32:re,float32:Ei,float64:yi,int64:jn,uint64:Vn,readFloat32:mn,readFloat64:vn,boolean:bi,string:En,stringCheck:Ti,number:Pt,numberCheck:Oi,arrayCheck:fe,switchStructureCheck:Fn}),yn=function(){function r(e){var s=this;this.$changes=new C(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,e&&e.forEach(function(c){return s.add(c)})}return r.prototype.onAdd=function(e,s){return s===void 0&&(s=!0),w(this.$callbacks||(this.$callbacks=[]),o.OPERATION.ADD,e,s?this.$items:void 0)},r.prototype.onRemove=function(e){return w(this.$callbacks||(this.$callbacks=[]),o.OPERATION.DELETE,e)},r.prototype.onChange=function(e){return w(this.$callbacks||(this.$callbacks=[]),o.OPERATION.REPLACE,e)},r.is=function(e){return e.collection!==void 0},r.prototype.add=function(e){var s=this.$refId++,c=e.$changes!==void 0;return c&&e.$changes.setParent(this,this.$changes.root,s),this.$changes.indexes[s]=s,this.$indexes.set(s,s),this.$items.set(s,e),this.$changes.change(s),s},r.prototype.at=function(e){var s=Array.from(this.$items.keys())[e];return this.$items.get(s)},r.prototype.entries=function(){return this.$items.entries()},r.prototype.delete=function(e){for(var s=this.$items.entries(),c,d;(d=s.next())&&!d.done;)if(e===d.value[1]){c=d.value[0];break}return c===void 0?!1:(this.$changes.delete(c),this.$indexes.delete(c),this.$items.delete(c))},r.prototype.clear=function(e){this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),e&&I.call(this,e),this.$items.clear(),this.$changes.operation({index:0,op:o.OPERATION.CLEAR}),this.$changes.touchParents()},r.prototype.has=function(e){return Array.from(this.$items.values()).some(function(s){return s===e})},r.prototype.forEach=function(e){var s=this;this.$items.forEach(function(c,d,E){return e(c,d,s)})},r.prototype.values=function(){return this.$items.values()},Object.defineProperty(r.prototype,"size",{get:function(){return this.$items.size},enumerable:!1,configurable:!0}),r.prototype.setIndex=function(e,s){this.$indexes.set(e,s)},r.prototype.getIndex=function(e){return this.$indexes.get(e)},r.prototype.getByIndex=function(e){return this.$items.get(this.$indexes.get(e))},r.prototype.deleteByIndex=function(e){var s=this.$indexes.get(e);this.$items.delete(s),this.$indexes.delete(e)},r.prototype.toArray=function(){return Array.from(this.$items.values())},r.prototype.toJSON=function(){var e=[];return this.forEach(function(s,c){e.push(typeof s.toJSON=="function"?s.toJSON():s)}),e},r.prototype.clone=function(e){var s;return e?s=Object.assign(new r,this):(s=new r,this.forEach(function(c){c.$changes?s.add(c.clone()):s.add(c)})),s},r}(),An=function(){function r(e){var s=this;this.$changes=new C(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,e&&e.forEach(function(c){return s.add(c)})}return r.prototype.onAdd=function(e,s){return s===void 0&&(s=!0),w(this.$callbacks||(this.$callbacks=[]),o.OPERATION.ADD,e,s?this.$items:void 0)},r.prototype.onRemove=function(e){return w(this.$callbacks||(this.$callbacks=[]),o.OPERATION.DELETE,e)},r.prototype.onChange=function(e){return w(this.$callbacks||(this.$callbacks=[]),o.OPERATION.REPLACE,e)},r.is=function(e){return e.set!==void 0},r.prototype.add=function(e){var s,c;if(this.has(e))return!1;var d=this.$refId++;e.$changes!==void 0&&e.$changes.setParent(this,this.$changes.root,d);var E=(c=(s=this.$changes.indexes[d])===null||s===void 0?void 0:s.op)!==null&&c!==void 0?c:o.OPERATION.ADD;return this.$changes.indexes[d]=d,this.$indexes.set(d,d),this.$items.set(d,e),this.$changes.change(d,E),d},r.prototype.entries=function(){return this.$items.entries()},r.prototype.delete=function(e){for(var s=this.$items.entries(),c,d;(d=s.next())&&!d.done;)if(e===d.value[1]){c=d.value[0];break}return c===void 0?!1:(this.$changes.delete(c),this.$indexes.delete(c),this.$items.delete(c))},r.prototype.clear=function(e){this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),e&&I.call(this,e),this.$items.clear(),this.$changes.operation({index:0,op:o.OPERATION.CLEAR}),this.$changes.touchParents()},r.prototype.has=function(e){for(var s=this.$items.values(),c=!1,d;(d=s.next())&&!d.done;)if(e===d.value){c=!0;break}return c},r.prototype.forEach=function(e){var s=this;this.$items.forEach(function(c,d,E){return e(c,d,s)})},r.prototype.values=function(){return this.$items.values()},Object.defineProperty(r.prototype,"size",{get:function(){return this.$items.size},enumerable:!1,configurable:!0}),r.prototype.setIndex=function(e,s){this.$indexes.set(e,s)},r.prototype.getIndex=function(e){return this.$indexes.get(e)},r.prototype.getByIndex=function(e){return this.$items.get(this.$indexes.get(e))},r.prototype.deleteByIndex=function(e){var s=this.$indexes.get(e);this.$items.delete(s),this.$indexes.delete(e)},r.prototype.toArray=function(){return Array.from(this.$items.values())},r.prototype.toJSON=function(){var e=[];return this.forEach(function(s,c){e.push(typeof s.toJSON=="function"?s.toJSON():s)}),e},r.prototype.clone=function(e){var s;return e?s=Object.assign(new r,this):(s=new r,this.forEach(function(c){c.$changes?s.add(c.clone()):s.add(c)})),s},r}(),wi=function(){function r(){this.refIds=new WeakSet,this.containerIndexes=new WeakMap}return r.prototype.addRefId=function(e){this.refIds.has(e)||(this.refIds.add(e),this.containerIndexes.set(e,new Set))},r.get=function(e){return e.$filterState===void 0&&(e.$filterState=new r),e.$filterState},r}(),$i=function(){function r(){this.refs=new Map,this.refCounts={},this.deletedRefs=new Set,this.nextUniqueId=0}return r.prototype.getNextUniqueId=function(){return this.nextUniqueId++},r.prototype.addRef=function(e,s,c){c===void 0&&(c=!0),this.refs.set(e,s),c&&(this.refCounts[e]=(this.refCounts[e]||0)+1)},r.prototype.removeRef=function(e){this.refCounts[e]=this.refCounts[e]-1,this.deletedRefs.add(e)},r.prototype.clearRefs=function(){this.refs.clear(),this.deletedRefs.clear(),this.refCounts={}},r.prototype.garbageCollectDeletedRefs=function(){var e=this;this.deletedRefs.forEach(function(s){if(!(e.refCounts[s]>0)){var c=e.refs.get(s);if(c instanceof At)for(var d in c._definition.schema)typeof c._definition.schema[d]!="string"&&c[d]&&c[d].$changes&&e.removeRef(c[d].$changes.refId);else{var E=c.$changes.parent._definition,S=E.schema[E.fieldsByIndex[c.$changes.parentIndex]];typeof Object.values(S)[0]=="function"&&Array.from(c.values()).forEach(function(L){return e.removeRef(L.$changes.refId)})}e.refs.delete(s),delete e.refCounts[s]}}),this.deletedRefs.clear()},r}(),bn=function(r){p(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(Error);function Ci(r,e,s,c){var d,E=!1;switch(e){case"number":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":case"int64":case"uint64":case"float32":case"float64":d="number",isNaN(r)&&console.log('trying to encode "NaN" in '.concat(s.constructor.name,"#").concat(c));break;case"string":d="string",E=!0;break;case"boolean":return}if(typeof r!==d&&(!E||E&&r!==null)){var S="'".concat(JSON.stringify(r),"'").concat(r&&r.constructor&&" (".concat(r.constructor.name,")")||"");throw new bn("a '".concat(d,"' was expected, but ").concat(S," was provided in ").concat(s.constructor.name,"#").concat(c))}}function Bn(r,e,s,c){if(!(r instanceof e))throw new bn("a '".concat(e.name,"' was expected, but '").concat(r.constructor.name,"' was provided in ").concat(s.constructor.name,"#").concat(c))}function Si(r,e,s,c,d){Ci(s,r,c,d);var E=gn[r];if(E)E(e,s);else throw new bn("a '".concat(r,"' was expected, but ").concat(s," was provided in ").concat(c.constructor.name,"#").concat(d))}function xi(r,e,s){return Un[r](e,s)}var At=function(){function r(){for(var e=[],s=0;s<arguments.length;s++)e[s]=arguments[s];Object.defineProperties(this,{$changes:{value:new C(this,void 0,new $i),enumerable:!1,writable:!0},$callbacks:{value:void 0,enumerable:!1,writable:!0}});var c=this._definition.descriptors;c&&Object.defineProperties(this,c),e[0]&&this.assign(e[0])}return r.onError=function(e){console.error(e)},r.is=function(e){return e._definition&&e._definition.schema!==void 0},r.prototype.onChange=function(e){return w(this.$callbacks||(this.$callbacks=[]),o.OPERATION.REPLACE,e)},r.prototype.onRemove=function(e){return w(this.$callbacks||(this.$callbacks=[]),o.OPERATION.DELETE,e)},r.prototype.assign=function(e){return Object.assign(this,e),this},Object.defineProperty(r.prototype,"_definition",{get:function(){return this.constructor._definition},enumerable:!1,configurable:!0}),r.prototype.setDirty=function(e,s){this.$changes.change(e,s)},r.prototype.listen=function(e,s,c){var d=this;return c===void 0&&(c=!0),this.$callbacks||(this.$callbacks={}),this.$callbacks[e]||(this.$callbacks[e]=[]),this.$callbacks[e].push(s),c&&this[e]!==void 0&&s(this[e],void 0),function(){return k(d.$callbacks[e],d.$callbacks[e].indexOf(s))}},r.prototype.decode=function(e,s,c){var d;s===void 0&&(s={offset:0}),c===void 0&&(c=this);var E=[],S=this.$changes.root,L=e.length,z=0;for(S.refs.set(z,this);s.offset<L;){var V=e[s.offset++];if(V==$){z=Pt(e,s);var R=S.refs.get(z);if(!R)throw new Error('"refId" not found: '.concat(z));c=R;continue}var K=c.$changes,P=c._definition!==void 0,F=P?V>>6<<6:V;if(F===o.OPERATION.CLEAR){c.clear(E);continue}var M=P?V%(F||255):Pt(e,s),H=P?c._definition.fieldsByIndex[M]:"",x=K.getType(M),U=void 0,Z=void 0,st=void 0;if(P?Z=c["_".concat(H)]:(Z=c.getByIndex(M),(F&o.OPERATION.ADD)===o.OPERATION.ADD?(st=c instanceof ut?En(e,s):M,c.setIndex(M,st)):st=c.getIndex(M)),(F&o.OPERATION.DELETE)===o.OPERATION.DELETE&&(F!==o.OPERATION.DELETE_AND_ADD&&c.deleteByIndex(M),Z&&Z.$changes&&S.removeRef(Z.$changes.refId),U=null),H===void 0){console.warn("@colyseus/schema: definition mismatch");for(var G={offset:s.offset};s.offset<L&&!(Fn(e,s)&&(G.offset=s.offset+1,S.refs.has(Pt(e,G))));)s.offset++;continue}else if(F!==o.OPERATION.DELETE)if(r.is(x)){var B=Pt(e,s);if(U=S.refs.get(B),F!==o.OPERATION.REPLACE){var Kt=this.getSchemaType(e,s,x);U||(U=this.createTypeInstance(Kt),U.$changes.refId=B,Z&&(U.$callbacks=Z.$callbacks,Z.$changes.refId&&B!==Z.$changes.refId&&S.removeRef(Z.$changes.refId))),S.addRef(B,U,U!==Z)}}else if(typeof x=="string")U=xi(x,e,s);else{var Tn=Ft(Object.keys(x)[0]),bt=Pt(e,s),dt=S.refs.has(bt)?Z||S.refs.get(bt):new Tn.constructor;if(U=dt.clone(!0),U.$changes.refId=bt,Z&&(U.$callbacks=Z.$callbacks,Z.$changes.refId&&bt!==Z.$changes.refId)){S.removeRef(Z.$changes.refId);for(var _t=Z.entries(),Ee=void 0;(Ee=_t.next())&&!Ee.done;){var Yt=(d=Ee.value,d[0]),On=d[1];E.push({refId:bt,op:o.OPERATION.DELETE,field:Yt,value:void 0,previousValue:On})}}S.addRef(bt,U,dt!==Z)}if(U!=null){if(U.$changes&&U.$changes.setParent(K.ref,K.root,M),c instanceof r)c[H]=U;else if(c instanceof ut){var Yt=st;c.$items.set(Yt,U),c.$changes.allChanges.add(M)}else if(c instanceof X)c.setAt(M,U);else if(c instanceof yn){var Zt=c.add(U);c.setIndex(M,Zt)}else if(c instanceof An){var Zt=c.add(U);Zt!==!1&&c.setIndex(M,Zt)}}Z!==U&&E.push({refId:z,op:F,field:H,dynamicIndex:st,value:U,previousValue:Z})}return this._triggerChanges(E),S.garbageCollectDeletedRefs(),E},r.prototype.encode=function(e,s,c){e===void 0&&(e=!1),s===void 0&&(s=[]),c===void 0&&(c=!1);for(var d=this.$changes,E=new WeakSet,S=[d],L=1,z=0;z<L;z++){var V=S[z],R=V.ref,K=R instanceof r;V.ensureRefId(),E.add(V),V!==d&&(V.changed||e)&&(yt(s,$),ht(s,V.refId));for(var P=e?Array.from(V.allChanges):Array.from(V.changes.values()),F=0,M=P.length;F<M;F++){var H=e?{op:o.OPERATION.ADD,index:P[F]}:P[F],x=H.index,U=K?R._definition.fieldsByIndex&&R._definition.fieldsByIndex[x]:x,Z=s.length;if(H.op!==o.OPERATION.TOUCH)if(K)yt(s,x|H.op);else{if(yt(s,H.op),H.op===o.OPERATION.CLEAR)continue;ht(s,x)}if(!K&&(H.op&o.OPERATION.ADD)==o.OPERATION.ADD&&R instanceof ut){var st=V.ref.$indexes.get(x);Rt(s,st)}if(H.op!==o.OPERATION.DELETE){var G=V.getType(x),B=V.getValue(x);if(B&&B.$changes&&!E.has(B.$changes)&&(S.push(B.$changes),B.$changes.ensureRefId(),L++),H.op!==o.OPERATION.TOUCH){if(r.is(G))Bn(B,G,R,U),ht(s,B.$changes.refId),(H.op&o.OPERATION.ADD)===o.OPERATION.ADD&&this.tryEncodeTypeId(s,G,B.constructor);else if(typeof G=="string")Si(G,s,B,R,U);else{var Kt=Ft(Object.keys(G)[0]);Bn(R["_".concat(U)],Kt.constructor,R,U),ht(s,B.$changes.refId)}c&&V.cache(x,s.slice(Z))}}}!e&&!c&&V.discard()}return s},r.prototype.encodeAll=function(e){return this.encode(!0,[],e)},r.prototype.applyFilters=function(e,s){var c,d;s===void 0&&(s=!1);for(var E=this,S=new Set,L=wi.get(e),z=[this.$changes],V=1,R=[],K=function(F){var M=z[F];if(S.has(M.refId))return"continue";var H=M.ref,x=H instanceof r;yt(R,$),ht(R,M.refId);var U=L.refIds.has(M),Z=s||!U;L.addRefId(M);var st=L.containerIndexes.get(M),G=Z?Array.from(M.allChanges):Array.from(M.changes.values());if(!s&&x&&H._definition.indexesWithFilters){var B=H._definition.indexesWithFilters;B.forEach(function(qt){!st.has(qt)&&M.allChanges.has(qt)&&(Z?G.push(qt):G.push({op:o.OPERATION.ADD,index:qt}))})}for(var Kt=0,Tn=G.length;Kt<Tn;Kt++){var bt=Z?{op:o.OPERATION.ADD,index:G[Kt]}:G[Kt];if(bt.op===o.OPERATION.CLEAR){yt(R,bt.op);continue}var dt=bt.index;if(bt.op===o.OPERATION.DELETE){x?yt(R,bt.op|dt):(yt(R,bt.op),ht(R,dt));continue}var _t=M.getValue(dt),Ee=M.getType(dt);if(x){var Yt=H._definition.filters&&H._definition.filters[dt];if(Yt&&!Yt.call(H,e,_t,E)){_t&&_t.$changes&&S.add(_t.$changes.refId);continue}}else{var On=M.parent,Yt=M.getChildrenFilter();if(Yt&&!Yt.call(On,e,H.$indexes.get(dt),_t,E)){_t&&_t.$changes&&S.add(_t.$changes.refId);continue}}if(_t.$changes&&(z.push(_t.$changes),V++),bt.op!==o.OPERATION.TOUCH)if(bt.op===o.OPERATION.ADD||x)R.push.apply(R,(c=M.caches[dt])!==null&&c!==void 0?c:[]),st.add(dt);else if(st.has(dt))R.push.apply(R,(d=M.caches[dt])!==null&&d!==void 0?d:[]);else{if(st.add(dt),yt(R,o.OPERATION.ADD),ht(R,dt),H instanceof ut){var Zt=M.ref.$indexes.get(dt);Rt(R,Zt)}_t.$changes?ht(R,_t.$changes.refId):gn[Ee](R,_t)}else if(_t.$changes&&!x){if(yt(R,o.OPERATION.ADD),ht(R,dt),H instanceof ut){var Zt=M.ref.$indexes.get(dt);Rt(R,Zt)}ht(R,_t.$changes.refId)}}},P=0;P<V;P++)K(P);return R},r.prototype.clone=function(){var e,s=new this.constructor,c=this._definition.schema;for(var d in c)typeof this[d]=="object"&&typeof((e=this[d])===null||e===void 0?void 0:e.clone)=="function"?s[d]=this[d].clone():s[d]=this[d];return s},r.prototype.toJSON=function(){var e=this._definition.schema,s=this._definition.deprecated,c={};for(var d in e)!s[d]&&this[d]!==null&&typeof this[d]<"u"&&(c[d]=typeof this[d].toJSON=="function"?this[d].toJSON():this["_".concat(d)]);return c},r.prototype.discardAllChanges=function(){this.$changes.discardAll()},r.prototype.getByIndex=function(e){return this[this._definition.fieldsByIndex[e]]},r.prototype.deleteByIndex=function(e){this[this._definition.fieldsByIndex[e]]=void 0},r.prototype.tryEncodeTypeId=function(e,s,c){s._typeid!==c._typeid&&(yt(e,O),ht(e,c._typeid))},r.prototype.getSchemaType=function(e,s,c){var d;return e[s.offset]===O&&(s.offset++,d=this.constructor._context.get(Pt(e,s))),d||c},r.prototype.createTypeInstance=function(e){var s=new e;return s.$changes.root=this.$changes.root,s},r.prototype._triggerChanges=function(e){for(var s,c,d,E,S,L,z,V,R,K=new Set,P=this.$changes.root.refs,F=function(H){var x=e[H],U=x.refId,Z=P.get(U),st=Z.$callbacks;if((x.op&o.OPERATION.DELETE)===o.OPERATION.DELETE&&x.previousValue instanceof r&&((c=(s=x.previousValue.$callbacks)===null||s===void 0?void 0:s[o.OPERATION.DELETE])===null||c===void 0||c.forEach(function(G){return G()})),!st)return"continue";if(Z instanceof r){if(!K.has(U))try{(d=st==null?void 0:st[o.OPERATION.REPLACE])===null||d===void 0||d.forEach(function(G){return G()})}catch(G){r.onError(G)}try{st.hasOwnProperty(x.field)&&((E=st[x.field])===null||E===void 0||E.forEach(function(G){return G(x.value,x.previousValue)}))}catch(G){r.onError(G)}}else x.op===o.OPERATION.ADD&&x.previousValue===void 0?(S=st[o.OPERATION.ADD])===null||S===void 0||S.forEach(function(G){var B;return G(x.value,(B=x.dynamicIndex)!==null&&B!==void 0?B:x.field)}):x.op===o.OPERATION.DELETE?x.previousValue!==void 0&&((L=st[o.OPERATION.DELETE])===null||L===void 0||L.forEach(function(G){var B;return G(x.previousValue,(B=x.dynamicIndex)!==null&&B!==void 0?B:x.field)})):x.op===o.OPERATION.DELETE_AND_ADD&&(x.previousValue!==void 0&&((z=st[o.OPERATION.DELETE])===null||z===void 0||z.forEach(function(G){var B;return G(x.previousValue,(B=x.dynamicIndex)!==null&&B!==void 0?B:x.field)})),(V=st[o.OPERATION.ADD])===null||V===void 0||V.forEach(function(G){var B;return G(x.value,(B=x.dynamicIndex)!==null&&B!==void 0?B:x.field)})),x.value!==x.previousValue&&((R=st[o.OPERATION.REPLACE])===null||R===void 0||R.forEach(function(G){var B;return G(x.value,(B=x.dynamicIndex)!==null&&B!==void 0?B:x.field)}));K.add(U)},M=0;M<e.length;M++)F(M)},r._definition=on.create(),r}();function Ni(r){for(var e=[r.$changes],s=1,c={},d=c,E=function(L){var z=e[L];z.changes.forEach(function(V){var R=z.ref,K=V.index,P=R._definition?R._definition.fieldsByIndex[K]:R.$indexes.get(K);d[P]=z.getValue(K)})},S=0;S<s;S++)E(S);return c}var ue={context:new vt},Ut=function(r){p(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return m([wt("string",ue)],e.prototype,"name",void 0),m([wt("string",ue)],e.prototype,"type",void 0),m([wt("number",ue)],e.prototype,"referencedType",void 0),e}(At),Fe=function(r){p(e,r);function e(){var s=r!==null&&r.apply(this,arguments)||this;return s.fields=new X,s}return m([wt("number",ue)],e.prototype,"id",void 0),m([wt([Ut],ue)],e.prototype,"fields",void 0),e}(At),Ii=function(r){p(e,r);function e(){var s=r!==null&&r.apply(this,arguments)||this;return s.types=new X,s}return e.encode=function(s){var c=s.constructor,d=new e;d.rootType=c._typeid;var E=function(V,R){for(var K in R){var P=new Ut;P.name=K;var F=void 0;if(typeof R[K]=="string")F=R[K];else{var M=R[K],H=void 0;At.is(M)?(F="ref",H=R[K]):(F=Object.keys(M)[0],typeof M[F]=="string"?F+=":"+M[F]:H=M[F]),P.referencedType=H?H._typeid:-1}P.type=F,V.fields.push(P)}d.types.push(V)},S=c._context.types;for(var L in S){var z=new Fe;z.id=Number(L),E(z,S[L]._definition.schema)}return d.encodeAll()},e.decode=function(s,c){var d=new vt,E=new e;E.decode(s,c);var S=E.types.reduce(function(K,P){var F=function(H){p(x,H);function x(){return H!==null&&H.apply(this,arguments)||this}return x}(At),M=P.id;return K[M]=F,d.add(F,M),K},{});E.types.forEach(function(K){var P=S[K.id];K.fields.forEach(function(F){var M;if(F.referencedType!==void 0){var H=F.type,x=S[F.referencedType];if(!x){var U=F.type.split(":");H=U[0],x=U[1]}H==="ref"?wt(x,{context:d})(P.prototype,F.name):wt((M={},M[H]=x,M),{context:d})(P.prototype,F.name)}else wt(F.type,{context:d})(P.prototype,F.name)})});var L=S[E.rootType],z=new L;for(var V in L._definition.schema){var R=L._definition.schema[V];typeof R!="string"&&(z[V]=typeof R=="function"?new R:new(Ft(Object.keys(R)[0])).constructor)}return z},m([wt([Fe],ue)],e.prototype,"types",void 0),m([wt("number",ue)],e.prototype,"rootType",void 0),e}(At);Ot("map",{constructor:ut}),Ot("array",{constructor:X}),Ot("set",{constructor:An}),Ot("collection",{constructor:yn}),o.ArraySchema=X,o.CollectionSchema=yn,o.Context=vt,o.MapSchema=ut,o.Reflection=Ii,o.ReflectionField=Ut,o.ReflectionType=Fe,o.Schema=At,o.SchemaDefinition=on,o.SetSchema=An,o.decode=Un,o.defineTypes=vi,o.deprecated=mi,o.dumpChanges=Ni,o.encode=gn,o.filter=an,o.filterChildren=gi,o.hasFilter=Dt,o.registerType=Ot,o.type=wt,Object.defineProperty(o,"__esModule",{value:!0})})})(dr,dr.exports);var no=dr.exports,bf=pt&&pt.__createBinding||(Object.create?function(h,l,o,f){f===void 0&&(f=o);var p=Object.getOwnPropertyDescriptor(l,o);(!p||("get"in p?!l.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return l[o]}}),Object.defineProperty(h,f,p)}:function(h,l,o,f){f===void 0&&(f=o),h[f]=l[o]}),Tf=pt&&pt.__setModuleDefault||(Object.create?function(h,l){Object.defineProperty(h,"default",{enumerable:!0,value:l})}:function(h,l){h.default=l}),Of=pt&&pt.__importStar||function(h){if(h&&h.__esModule)return h;var l={};if(h!=null)for(var o in h)o!=="default"&&Object.prototype.hasOwnProperty.call(h,o)&&bf(l,h,o);return Tf(l,h),l};Object.defineProperty(Mn,"__esModule",{value:!0});Mn.Room=void 0;const Ks=Of(nn),wf=fi,Ct=_r,Ys=Pe,$f=hi,li=rn,Vt=no,qs=pr;class gr{constructor(l,o){this.onStateChange=(0,li.createSignal)(),this.onError=(0,li.createSignal)(),this.onLeave=(0,li.createSignal)(),this.onJoin=(0,li.createSignal)(),this.hasJoined=!1,this.onMessageHandlers=(0,$f.createNanoEvents)(),this.roomId=null,this.name=l,o&&(this.serializer=new((0,Ys.getSerializer)("schema")),this.rootSchema=o,this.serializer.state=new o),this.onError((f,p)=>{var m;return(m=console.warn)===null||m===void 0?void 0:m.call(console,`colyseus.js - onError => (${f}) ${p}`)}),this.onLeave(()=>this.removeAllListeners())}get id(){return this.roomId}connect(l,o,f=this){const p=new wf.Connection;f.connection=p,p.events.onmessage=gr.prototype.onMessageCallback.bind(f),p.events.onclose=function(m){var b;if(!f.hasJoined){(b=console.warn)===null||b===void 0||b.call(console,`Room connection was closed unexpectedly (${m.code}): ${m.reason}`),f.onError.invoke(m.code,m.reason);return}m.code===qs.CloseCode.DEVMODE_RESTART&&o?o():(f.onLeave.invoke(m.code),f.destroy())},p.events.onerror=function(m){var b;(b=console.warn)===null||b===void 0||b.call(console,`Room, onError (${m.code}): ${m.reason}`),f.onError.invoke(m.code,m.reason)},p.connect(l)}leave(l=!0){return new Promise(o=>{this.onLeave(f=>o(f)),this.connection?l?this.connection.send([Ct.Protocol.LEAVE_ROOM]):this.connection.close():this.onLeave.invoke(qs.CloseCode.CONSENTED)})}onMessage(l,o){return this.onMessageHandlers.on(this.getMessageHandlerKey(l),o)}send(l,o){const f=[Ct.Protocol.ROOM_DATA];typeof l=="string"?Vt.encode.string(f,l):Vt.encode.number(f,l);let p;if(o!==void 0){const m=Ks.encode(o);p=new Uint8Array(f.length+m.byteLength),p.set(new Uint8Array(f),0),p.set(new Uint8Array(m),f.length)}else p=new Uint8Array(f);this.connection.send(p.buffer)}sendBytes(l,o){const f=[Ct.Protocol.ROOM_DATA_BYTES];typeof l=="string"?Vt.encode.string(f,l):Vt.encode.number(f,l);let p;p=new Uint8Array(f.length+(o.byteLength||o.length)),p.set(new Uint8Array(f),0),p.set(new Uint8Array(o),f.length),this.connection.send(p.buffer)}get state(){return this.serializer.getState()}removeAllListeners(){this.onJoin.clear(),this.onStateChange.clear(),this.onError.clear(),this.onLeave.clear(),this.onMessageHandlers.events={}}onMessageCallback(l){const o=Array.from(new Uint8Array(l.data)),f=o[0];if(f===Ct.Protocol.JOIN_ROOM){let p=1;const m=(0,Ct.utf8Read)(o,p);if(p+=(0,Ct.utf8Length)(m),this.serializerId=(0,Ct.utf8Read)(o,p),p+=(0,Ct.utf8Length)(this.serializerId),!this.serializer){const b=(0,Ys.getSerializer)(this.serializerId);this.serializer=new b}o.length>p&&this.serializer.handshake&&this.serializer.handshake(o,{offset:p}),this.reconnectionToken=`${this.roomId}:${m}`,this.hasJoined=!0,this.onJoin.invoke(),this.connection.send([Ct.Protocol.JOIN_ROOM])}else if(f===Ct.Protocol.ERROR){const p={offset:1},m=Vt.decode.number(o,p),b=Vt.decode.string(o,p);this.onError.invoke(m,b)}else if(f===Ct.Protocol.LEAVE_ROOM)this.leave();else if(f===Ct.Protocol.ROOM_DATA_SCHEMA){const p={offset:1},b=this.serializer.getState().constructor._context.get(Vt.decode.number(o,p)),$=new b;$.decode(o,p),this.dispatchMessage(b,$)}else if(f===Ct.Protocol.ROOM_STATE)o.shift(),this.setState(o);else if(f===Ct.Protocol.ROOM_STATE_PATCH)o.shift(),this.patch(o);else if(f===Ct.Protocol.ROOM_DATA){const p={offset:1},m=Vt.decode.stringCheck(o,p)?Vt.decode.string(o,p):Vt.decode.number(o,p),b=o.length>p.offset?Ks.decode(l.data,p.offset):void 0;this.dispatchMessage(m,b)}else if(f===Ct.Protocol.ROOM_DATA_BYTES){const p={offset:1},m=Vt.decode.stringCheck(o,p)?Vt.decode.string(o,p):Vt.decode.number(o,p);this.dispatchMessage(m,new Uint8Array(o.slice(p.offset)))}}setState(l){this.serializer.setState(l),this.onStateChange.invoke(this.serializer.getState())}patch(l){this.serializer.patch(l),this.onStateChange.invoke(this.serializer.getState())}dispatchMessage(l,o){var f;const p=this.getMessageHandlerKey(l);this.onMessageHandlers.events[p]?this.onMessageHandlers.emit(p,o):this.onMessageHandlers.events["*"]?this.onMessageHandlers.emit("*",l,o):(f=console.warn)===null||f===void 0||f.call(console,`colyseus.js: onMessage() not registered for type '${l}'.`)}destroy(){this.serializer&&this.serializer.teardown()}getMessageHandlerKey(l){switch(typeof l){case"function":return`$${l._typeid}`;case"string":return l;case"number":return`i${l}`;default:throw new Error("invalid message type.")}}}Mn.Room=gr;var ne=pt&&pt.__awaiter||function(h,l,o,f){function p(m){return m instanceof o?m:new o(function(b){b(m)})}return new(o||(o=Promise))(function(m,b){function $(w){try{C(f.next(w))}catch(I){b(I)}}function O(w){try{C(f.throw(w))}catch(I){b(I)}}function C(w){w.done?m(w.value):p(w.value).then($,O)}C((f=f.apply(h,l||[])).next())})},ur;Object.defineProperty(en,"__esModule",{value:!0});en.Client=en.MatchMakeError=void 0;const Gs=Zs,Cf=pr,Sf=Mn;class di extends Error{constructor(l,o){super(l),this.code=o,Object.setPrototypeOf(this,di.prototype)}}en.MatchMakeError=di;const xf=typeof window<"u"&&typeof((ur=window==null?void 0:window.location)===null||ur===void 0?void 0:ur.hostname)<"u"?`${window.location.protocol.replace("http","ws")}//${window.location.hostname}${window.location.port&&`:${window.location.port}`}`:"ws://127.0.0.1:2567";class Nf{constructor(l=xf){if(typeof l=="string"){const o=new URL(l),f=o.protocol==="https:"||o.protocol==="wss:",p=Number(o.port||(f?443:80));this.settings={hostname:o.hostname,pathname:o.pathname!=="/"?o.pathname:"",port:p,secure:f}}else l.port===void 0&&(l.port=l.secure?443:80),l.pathname===void 0&&(l.pathname=""),this.settings=l}joinOrCreate(l,o={},f){return ne(this,void 0,void 0,function*(){return yield this.createMatchMakeRequest("joinOrCreate",l,o,f)})}create(l,o={},f){return ne(this,void 0,void 0,function*(){return yield this.createMatchMakeRequest("create",l,o,f)})}join(l,o={},f){return ne(this,void 0,void 0,function*(){return yield this.createMatchMakeRequest("join",l,o,f)})}joinById(l,o={},f){return ne(this,void 0,void 0,function*(){return yield this.createMatchMakeRequest("joinById",l,o,f)})}reconnect(l,o){return ne(this,void 0,void 0,function*(){if(typeof l=="string"&&typeof o=="string")throw new Error("DEPRECATED: .reconnect() now only accepts 'reconnectionToken' as argument.\nYou can get this token from previously connected `room.reconnectionToken`");const[f,p]=l.split(":");return yield this.createMatchMakeRequest("reconnect",f,{reconnectionToken:p},o)})}getAvailableRooms(l=""){return ne(this,void 0,void 0,function*(){return(yield(0,Gs.get)(this.getHttpEndpoint(`${l}`),{headers:{Accept:"application/json"}})).data})}consumeSeatReservation(l,o,f){return ne(this,void 0,void 0,function*(){const p=this.createRoom(l.room.name,o);p.roomId=l.room.roomId,p.sessionId=l.sessionId;const m={sessionId:p.sessionId};l.reconnectionToken&&(m.reconnectionToken=l.reconnectionToken);const b=f||p;return p.connect(this.buildEndpoint(l.room,m),l.devMode&&(()=>ne(this,void 0,void 0,function*(){console.info(`[Colyseus devMode]: ${String.fromCodePoint(128260)} Re-establishing connection with room id '${p.roomId}'...`);let $=0,O=8;const C=()=>ne(this,void 0,void 0,function*(){$++;try{yield this.consumeSeatReservation(l,o,b),console.info(`[Colyseus devMode]: ${String.fromCodePoint(9989)} Successfully re-established connection with room '${p.roomId}'`)}catch{$<O?(console.info(`[Colyseus devMode]: ${String.fromCodePoint(128260)} retrying... (${$} out of ${O})`),setTimeout(C,2e3)):console.info(`[Colyseus devMode]: ${String.fromCodePoint(10060)} Failed to reconnect. Is your server running? Please check server logs.`)}});setTimeout(C,2e3)})),b),new Promise(($,O)=>{const C=(w,I)=>O(new Cf.ServerError(w,I));b.onError.once(C),b.onJoin.once(()=>{b.onError.remove(C),$(b)})})})}createMatchMakeRequest(l,o,f={},p,m){return ne(this,void 0,void 0,function*(){const b=(yield(0,Gs.post)(this.getHttpEndpoint(`${l}/${o}`),{headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(f)})).data;if(b.error)throw new di(b.error,b.code);return l==="reconnect"&&(b.reconnectionToken=f.reconnectionToken),yield this.consumeSeatReservation(b,p,m)})}createRoom(l,o){return new Sf.Room(l,o)}buildEndpoint(l,o={}){const f=[];for(const m in o)o.hasOwnProperty(m)&&f.push(`${m}=${o[m]}`);let p=this.settings.secure?"wss://":"ws://";return l.publicAddress?p+=`${l.publicAddress}`:p+=`${this.settings.hostname}${this.getEndpointPort()}${this.settings.pathname}`,`${p}/${l.processId}/${l.roomId}?${f.join("&")}`}getHttpEndpoint(l=""){return`${this.settings.secure?"https":"http"}://${this.settings.hostname}${this.getEndpointPort()}${this.settings.pathname}/matchmake/${l}`}getEndpointPort(){return this.settings.port!==80&&this.settings.port!==443?`:${this.settings.port}`:""}}en.Client=Nf;var io={},_e={};Object.defineProperty(_e,"__esModule",{value:!0});_e.getItem=_e.removeItem=_e.setItem=void 0;let hr;function mr(){return hr||(hr=typeof cc<"u"&&cc.sys&&cc.sys.localStorage?cc.sys.localStorage:typeof window<"u"&&window.localStorage?window.localStorage:{cache:{},setItem:function(h,l){this.cache[h]=l},getItem:function(h){this.cache[h]},removeItem:function(h){delete this.cache[h]}}),hr}function If(h,l){mr().setItem(h,l)}_e.setItem=If;function Df(h){mr().removeItem(h)}_e.removeItem=Df;function Rf(h,l){const o=mr().getItem(h);typeof Promise>"u"||!(o instanceof Promise)?l(o):o.then(f=>l(f))}_e.getItem=Rf;(function(h){var l=pt&&pt.__createBinding||(Object.create?function(C,w,I,k){k===void 0&&(k=I);var Q=Object.getOwnPropertyDescriptor(w,I);(!Q||("get"in Q?!w.__esModule:Q.writable||Q.configurable))&&(Q={enumerable:!0,get:function(){return w[I]}}),Object.defineProperty(C,k,Q)}:function(C,w,I,k){k===void 0&&(k=I),C[k]=w[I]}),o=pt&&pt.__setModuleDefault||(Object.create?function(C,w){Object.defineProperty(C,"default",{enumerable:!0,value:w})}:function(C,w){C.default=w}),f=pt&&pt.__importStar||function(C){if(C&&C.__esModule)return C;var w={};if(C!=null)for(var I in C)I!=="default"&&Object.prototype.hasOwnProperty.call(C,I)&&l(w,C,I);return o(w,C),w},p=pt&&pt.__awaiter||function(C,w,I,k){function Q(et){return et instanceof I?et:new I(function(X){X(et)})}return new(I||(I=Promise))(function(et,X){function ce(Ot){try{St(k.next(Ot))}catch(Ft){X(Ft)}}function ut(Ot){try{St(k.throw(Ot))}catch(Ft){X(Ft)}}function St(Ot){Ot.done?et(Ot.value):Q(Ot.value).then(ce,ut)}St((k=k.apply(C,w||[])).next())})};Object.defineProperty(h,"__esModule",{value:!0}),h.Auth=h.Platform=void 0;const m=f(Zs),b=_e,$="colyseus-auth-token";(function(C){C.ios="ios",C.android="android"})(h.Platform||(h.Platform={}));class O{constructor(w){this._id=void 0,this.username=void 0,this.displayName=void 0,this.avatarUrl=void 0,this.isAnonymous=void 0,this.email=void 0,this.lang=void 0,this.location=void 0,this.timezone=void 0,this.metadata=void 0,this.devices=void 0,this.facebookId=void 0,this.twitterId=void 0,this.googleId=void 0,this.gameCenterId=void 0,this.steamId=void 0,this.friendIds=void 0,this.blockedUserIds=void 0,this.createdAt=void 0,this.updatedAt=void 0,this.token=void 0,this.endpoint=w.replace("ws","http"),(0,b.getItem)($,I=>this.token=I)}get hasToken(){return!!this.token}login(w={}){return p(this,void 0,void 0,function*(){const I=Object.assign({},w);this.hasToken&&(I.token=this.token);const k=yield this.request("post","/auth",I);this.token=k.token,(0,b.setItem)($,this.token);for(let Q in k)this.hasOwnProperty(Q)&&(this[Q]=k[Q]);return this.registerPingService(),this})}save(){return p(this,void 0,void 0,function*(){return yield this.request("put","/auth",{},{username:this.username,displayName:this.displayName,avatarUrl:this.avatarUrl,lang:this.lang,location:this.location,timezone:this.timezone}),this})}getFriends(){return p(this,void 0,void 0,function*(){return yield this.request("get","/friends/all")})}getOnlineFriends(){return p(this,void 0,void 0,function*(){return yield this.request("get","/friends/online")})}getFriendRequests(){return p(this,void 0,void 0,function*(){return yield this.request("get","/friends/requests")})}sendFriendRequest(w){return p(this,void 0,void 0,function*(){return yield this.request("post","/friends/requests",{userId:w})})}acceptFriendRequest(w){return p(this,void 0,void 0,function*(){return yield this.request("put","/friends/requests",{userId:w})})}declineFriendRequest(w){return p(this,void 0,void 0,function*(){return yield this.request("del","/friends/requests",{userId:w})})}blockUser(w){return p(this,void 0,void 0,function*(){return yield this.request("post","/friends/block",{userId:w})})}unblockUser(w){return p(this,void 0,void 0,function*(){return yield this.request("put","/friends/block",{userId:w})})}request(w,I,k={},Q,et={}){return p(this,void 0,void 0,function*(){et.Accept="application/json",this.hasToken&&(et.Authorization="Bearer "+this.token);const X=[];for(const St in k)X.push(`${St}=${k[St]}`);const ce=X.length>0?`?${X.join("&")}`:"",ut={headers:et};return Q&&(ut.body=Q),(yield m[w](`${this.endpoint}${I}${ce}`,ut)).data})}logout(){this.token=void 0,(0,b.removeItem)($),this.unregisterPingService()}registerPingService(w=15e3){this.unregisterPingService(),this.keepOnlineInterval=setInterval(()=>this.request("get","/auth"),w)}unregisterPingService(){clearInterval(this.keepOnlineInterval)}}h.Auth=O})(io);var pi={};Object.defineProperty(pi,"__esModule",{value:!0});pi.SchemaSerializer=void 0;const Js=no;class Lf{setState(l){return this.state.decode(l)}getState(){return this.state}patch(l){return this.state.decode(l)}teardown(){var l,o;(o=(l=this.state)===null||l===void 0?void 0:l.$changes)===null||o===void 0||o.root.clearRefs()}handshake(l,o){this.state?new Js.Reflection().decode(l,o):this.state=Js.Reflection.decode(l,o)}}pi.SchemaSerializer=Lf;var _i={};Object.defineProperty(_i,"__esModule",{value:!0});_i.NoneSerializer=void 0;class Pf{setState(l){}getState(){return null}patch(l){}teardown(){}handshake(l){}}_i.NoneSerializer=Pf;(function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.SchemaSerializer=h.registerSerializer=h.Platform=h.Auth=h.Room=h.ErrorCode=h.Protocol=h.Client=void 0;var l=en;Object.defineProperty(h,"Client",{enumerable:!0,get:function(){return l.Client}});var o=_r;Object.defineProperty(h,"Protocol",{enumerable:!0,get:function(){return o.Protocol}}),Object.defineProperty(h,"ErrorCode",{enumerable:!0,get:function(){return o.ErrorCode}});var f=Mn;Object.defineProperty(h,"Room",{enumerable:!0,get:function(){return f.Room}});var p=io;Object.defineProperty(h,"Auth",{enumerable:!0,get:function(){return p.Auth}}),Object.defineProperty(h,"Platform",{enumerable:!0,get:function(){return p.Platform}});const m=pi;Object.defineProperty(h,"SchemaSerializer",{enumerable:!0,get:function(){return m.SchemaSerializer}});const b=_i,$=Pe;Object.defineProperty(h,"registerSerializer",{enumerable:!0,get:function(){return $.registerSerializer}}),(0,$.registerSerializer)("schema",m.SchemaSerializer),(0,$.registerSerializer)("none",b.NoneSerializer)})(Qs);class Qf extends Xs{constructor(o){super(o);rt(this,"colyseusNexusClient",new Qs.Client("https://game.thenexusbattles2.cloud/server-0"));rt(this,"colyseusRoom");rt(this,"localUsername","Nexus Player");rt(this,"sessionId");rt(this,"playerMap",new Map);rt(this,"nexusClientGetAvaliableRooms",async()=>{let o=[];try{return(await this.colyseusNexusClient.getAvailableRooms("room_battle")).forEach(p=>{o.push({roomId:p.roomId,roomMedatadataNombre:p.metadata.nombre,roomMetadataClients:p.clients.toString(),roomMetadataMaximoClients:p.metadata.maximo,roomMetadataGanancia:p.metadata.ganacia,roomMetadataEquipos:p.metadata.equipos=="1"?"Equipos":"Individual"})}),o}catch(f){return console.log("Error fetching rooms.",f),o}});rt(this,"nexusClientHandleGlobalRoom",async()=>{this.colyseusNexusClient.joinOrCreate("global_room").then(o=>{this.colyseusRoom=o,this.sessionId=o.sessionId,this.handleGlobalJoinAction()})});rt(this,"nexusClientCreateRoom",async()=>{try{const o={numero_creditos:Pn.get("NumeroRecompensa"),numero_jugadores:Pn.get("NumeroJugadores"),nombre_sala:Pn.get("NombreSala"),equipos:Pn.get("SetEquipos"),username:this.localUsername};return this.colyseusNexusClient.create("room_battle",o).then(f=>{this.colyseusRoom=f,this.sessionId=f.sessionId,this.handleJoinAction()}),!0}catch{return!1}});rt(this,"nexusClientJoinRoom",async()=>{try{const o=Pn.get("Join");return o!=null&&this.colyseusNexusClient.joinById(o,{username:this.localUsername}).then(f=>{this.colyseusRoom=f,this.sessionId=f.sessionId,this.handleJoinAction()}),!0}catch{return!1}});rt(this,"nexusClientGetPlayers",()=>this.playerMap);rt(this,"handleJoinAction",()=>{this.dialog.notify(this,"nexusJoinedRoom",{}),this.colyseusRoom.state.clients.onAdd((o,f)=>{this.playerMap.set(f,o),this.dialog.notify(this,"nexusClientJoinedRoom",{username:o.username})}),this.colyseusRoom.state.clients.onRemove((o,f)=>{this.playerMap.delete(f),this.dialog.notify(this,"nexusClientLeftRoom",{username:o.username})}),this.colyseusRoom.onMessage(0,()=>{setTimeout(()=>{this.dialog.notify(this,"nexusRoomReady",{})},1e3)}),this.colyseusRoom.onMessage(1,o=>{this.handleChatInteraction(1,o.username,o.text)}),this.colyseusRoom.onMessage(3,o=>{this.dialog.notify(this,"nexusGetTurn",o)}),this.colyseusRoom.onMessage(4,()=>{this.dialog.notify(this,"playerHasTerminatedTurn",{})}),this.colyseusRoom.onMessage(5,o=>{this.dialog.notify(this,"registerRemotePlayerCard",o)}),this.colyseusRoom.onMessage(8,o=>{this.dialog.notify(this,"remoteAttackRecieved",o)}),this.colyseusRoom.onMessage(7,o=>{this.dialog.notify(this,"recievedDecoratorNotif",o)})});rt(this,"handleGlobalJoinAction",()=>{this.colyseusRoom.onMessage(1,o=>{this.handleChatInteraction(1,o.username,o.text)})});rt(this,"handleChatInteraction",(o,f,p)=>{switch(o){case 1:this.dialog.notify(this,"newChatGeneralMessage",{player_name:f,message_content:p});break;case 0:case 2:this.dialog.notify(this,"newChatStatusMessage",{player_name:f,message_content:p});break;default:console.error("Nexus Client Error: Trying to compute an undefined type of message!");break}});rt(this,"sendChatMessage",o=>{this.colyseusRoom.send(1,{username:this.localUsername,text:o}),this.handleChatInteraction(1,this.localUsername,o)});rt(this,"sendClientGameViewLoaded",()=>{this.colyseusRoom.send(2)});rt(this,"sendClientFinishedTurn",()=>{this.colyseusRoom.send(4)});rt(this,"sendLocalCardID",o=>{this.colyseusRoom.send(5,{cardID:o})});rt(this,"sendClientAttack",(o,f)=>{this.colyseusRoom.send(8,{remoteID:o,dmg:f})});rt(this,"sendClientCreatedDecorator",o=>{this.colyseusRoom.send(7,o)})}}export{Xf as C,Qf as N};
